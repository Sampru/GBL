<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>AFU: src/fin_opt_fut.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AFU
   &#160;<span id="projectnumber">4.1</span>
   </div>
   <div id="projectbrief">ALMIS_Financial_utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fin__opt__fut_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">fin_opt_fut.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Black &amp; Scholes of an interest rate option.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;cardinal.h&gt;</code><br/>
<code>#include &lt;errDef.h&gt;</code><br/>
<code>#include &lt;math_def.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="afu__def_8h_source.html">afu_def.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mkt__def_8h_source.html">mkt_def.h</a>&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6b8353739387646a502934d5b54af0b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fin__opt__fut_8c.html#a6b8353739387646a502934d5b54af0b6">CalIntOpt</a> (char *Dat, char *Clo, double Prx, double Stk, double Dfc, double DfcRho, double Vol, char *Cpu, int Ift, double *Prm, double *Dlt, double *Gmm, double *Veg, double *Tht, double *Rho, char *Prd, char *Dev)</td></tr>
<tr class="memdesc:a6b8353739387646a502934d5b54af0b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Black &amp; Scholes of an interest rate option.  <a href="#a6b8353739387646a502934d5b54af0b6"></a><br/></td></tr>
<tr class="separator:a6b8353739387646a502934d5b54af0b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015ce8f85e500056c8613bbb3577cad1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fin__opt__fut_8c.html#a015ce8f85e500056c8613bbb3577cad1">CalIntOptIrg</a> (char *Dat, char *Clo, double Prx, double Stk, double Dfc, double DfcRho, double Vol, char *Cpu, int Ift, double Icp, double DfcBdt, double *Prm, double *Dlt, double *Gmm, double *Veg, char *Prd, char *Dev)</td></tr>
<tr class="memdesc:a015ce8f85e500056c8613bbb3577cad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Black-76 of an interest rate option for IRG digitals.  <a href="#a015ce8f85e500056c8613bbb3577cad1"></a><br/></td></tr>
<tr class="separator:a015ce8f85e500056c8613bbb3577cad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a01bce2973874770782e493ad4896af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fin__opt__fut_8c.html#a7a01bce2973874770782e493ad4896af">CalIntOptNor</a> (char *Dat, char *Clo, double Prx, double Stk, double Dfc, double Vol, char *Cpu, double *Prm, char *Prd)</td></tr>
<tr class="memdesc:a7a01bce2973874770782e493ad4896af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Black &amp; Scholes of an interest rate option. NORMAL VERSION (vs lognormal)  <a href="#a7a01bce2973874770782e493ad4896af"></a><br/></td></tr>
<tr class="separator:a7a01bce2973874770782e493ad4896af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05448318d618d48e009d9dcef9ebcd4e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="fin__opt__fut_8c.html#a05448318d618d48e009d9dcef9ebcd4e">CalIntOptIrgNor</a> (char *Dat, char *Clo, double Prx, double Stk, double Dfc, double Vol, char *Cpu, double Icp, double *Prm, char *Prd, char *Dev)</td></tr>
<tr class="memdesc:a05448318d618d48e009d9dcef9ebcd4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Black-76 of an interest rate option for IRG digitals. NORMAL VERSION (vs lognormal)  <a href="#a05448318d618d48e009d9dcef9ebcd4e"></a><br/></td></tr>
<tr class="separator:a05448318d618d48e009d9dcef9ebcd4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Black &amp; Scholes of an interest rate option. </p>
<p>hf : <a class="el" href="mkt__def_8h.html" title="Header file for all MKT functions and types.">mkt_def.h</a></p>
<dl class="section user"><dt>Acronyme</dt><dd></dd></dl>
<p>Black &amp; Scholes of an interest rate option</p>
<dl class="section author"><dt>Author</dt><dd>Keyvan Shamsa - 12/Feb/1998 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a6b8353739387646a502934d5b54af0b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CalIntOpt </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Clo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Prx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Stk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Dfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>DfcRho</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Ift</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Prm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Dlt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Gmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Veg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Tht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Rho</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Prd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Black &amp; Scholes of an interest rate option. </p>
<p>Black &amp; Scholes of an interest rate option. The used basis is "ACT/360" instead of "ACT/365" for the cdsi to obtain same results than Bloomberg. For the rest of products the used basis is "ACT/365". Swaptions may also be treated. The treated products in that method are:</p>
<ul>
<li>irg-s (caplets/floorlets)</li>
<li>cds options</li>
<li>Swaptions.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Dat</td><td>Calculation date </td></tr>
    <tr><td class="paramname">Clo</td><td>Maturity date of the option. For irg-s (Cap/floor) the maturity date will be the fixing date, that is, the beginning of the theorical loan. </td></tr>
    <tr><td class="paramname">Prx</td><td>Current price of the underlying. Usually, the forward rate (ex: 3.45) but for the MMfutures it will be its price (ex: 97.34). </td></tr>
    <tr><td class="paramname">Stk</td><td>Strike of the option. Same format than Prx </td></tr>
    <tr><td class="paramname">Dfc</td><td>Discount factor, calculated with a rate without risk, until maturity date of the option. In the irg (cap, floor) it will be the DF until the payment date </td></tr>
    <tr><td class="paramname">DfcRho</td><td>Discount factor, calculated with a rate without risk, for Rho calculation </td></tr>
    <tr><td class="paramname">Vol</td><td>Volatility (in percentage) </td></tr>
    <tr><td class="paramname">Cpu</td><td>'C': call, 'P': put </td></tr>
    <tr><td class="paramname">Ift</td><td>1: the value of DfcRho are taken into account. 0: calculations are made with both values to 1 </td></tr>
    <tr><td class="paramname">Prm</td><td>(OUT) Option premium, it is in the same units that Prx is. For MMfutures it will be in percent. To obtain the premium amount it should be multiplied by the notional and divided by 100.<ul>
<li>irg (cap, floors), it should be multiplied by the number of years of the 'loan'</li>
<li>CDS, CDSi: it should be multiplied by the BPV (or DV01 fwd)</li>
<li>swaptions: it must be multiplied by the notional and divided by 100 </li>
</ul>
</td></tr>
    <tr><td class="paramname">Dlt</td><td>(OUT) Option delta, in unit, not percentages (for example, 23% will be 0.23). It can be used for calculate the premium for a new price. Example, with a Prx = 3.5% we obtain a Prm = 0.14301753% and a Dlt = 0.31670394. If the price is increased in 0.05%, until 3.55%, the new Prm should be similar to: NewPrm = 0.14301753 + 0.31670394 * 0.05 = 0.15885273. If we calculate the Prm for the new price we obtain 0.15943352. A part of the error can be elimimated considering the gamma. </td></tr>
    <tr><td class="paramname">Gmm</td><td>(OUT) Option gamma, in unit, not percentages (for example, 23% will be 0.23). It can be used for calculate the premium for a new price. Example, with a Prx = 3.5% we obtain a Prm = 0.14301753%, a Dlt = 0.31670394 and a gamma of 0.46219991. If the price is increased in 0.05%, until 3.55%, the new Prm should be similar to: NewPrm = 0.14301753 + 0.31670394 * 0.05 + 0.5 * 0.4621999 * 0.05 * 0.05 = 0.15943048. If we calculate the Prm for the new price we obtain 0.15943352. The precission is bigger than using only the delta </td></tr>
    <tr><td class="paramname">Veg</td><td>(OUT) Option vega, in percent. It can be used for calculate the premium for a new volatility. Example, with a Vol = 16.00% we obtain a Prm = 0.01004690% and a Veg = 0.33110621. If the volatility is increased in 1.00%, until 17.00%, the new Prm should be similar to: NewPrm = 0.01004690 + 0.33110621 * 1.00 / 100 = 0.01335796. If we calculate the Prm for the new volatility we obtain 0.01366825. </td></tr>
    <tr><td class="paramname">Tht</td><td>(OUT) Option theta </td></tr>
    <tr><td class="paramname">Rho</td><td>(OUT) Option rho </td></tr>
    <tr><td class="paramname">Prd</td><td>Product </td></tr>
    <tr><td class="paramname">Dev</td><td>Currency</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>???? - ????</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 13/Nov/2001. Do not modify Clo, use local variable DatTmp</li>
<li>Aitziber BARRERO - 06/Oct/2003: Correct to avoid a warning</li>
<li>Ramon MARTINEZ - 11/Apr/2005: Normalice the code. Even the function name, from fin_opt_fut to CalIntOpt</li>
<li>Ramon MARTINEZ - 21/Apr/2005: Sustitue fin_opt_fut by CalIntOpt in the header's funcion. And correct a bug, DfcRho was used insted of DfcRho1</li>
<li>Ramon MARTINEZ - 23/Nov/2006: Improve comments for Dfc (exception for irg)</li>
<li>Ramon MARTINEZ - 29/Nov/2006: Improve comments for Prm (premium amount). Sustitute clCalBondBasis by clCalBasis</li>
<li>Ramon MARTINEZ - 18/Dec/2006: Sustiute Rat and RatRho by Dfc and DfcRho respectively. Add error management. Uses Stk1 in sustitution of Stk and Frw in Prx</li>
<li>Ramon MARTINEZ - 28/Dec/2006: Order code. Remake gamma and vega calculation</li>
<li>Basilio TAMAYO - 12/Feb/2007: Delete unused variables.</li>
<li>Jon BARRUTIA - 19/Oct/2007: When calculating the basis, if the product is cdsi, use an ACT/360 basis instead of EXA/EXA in order to have same results than Bloomberg.</li>
<li>Gotzon ETXEBERRIA - 17/Jan/2012: Check if Prx negative set it no nearly zero</li>
<li>Gotzon ETXEBERRIA - 17/Jan/2012: Use DBL_M_EPSILON (Set Prx lower than DBL_M_EPSILON to DBL_M_EPSILON to avoid problems with the calculation algorithm)</li>
<li>Alex RODRIGUEZ - 19/Nov/2012: Correct header of function</li>
<li>Gotzon ETXEBERRIA - 18/Nov/2014: Add Swap options in header</li>
<li>Nerea RAMOS - 27/Nov/2014: Use ACT/365 instead of EXA/EXA to calculate the option duration in years for products != cdsi. Reorganise and correct comments</li>
<li>Gotzon ETXEBERRIA - 12/May/2015: Use MTHdisNsc instead of normale from cardinal. seeAlso : CalIntOptIrg, CalIntOptNor, CalIntOptIrgNor </li>
</ul>

</div>
</div>
<a class="anchor" id="a015ce8f85e500056c8613bbb3577cad1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CalIntOptIrg </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Clo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Prx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Stk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Dfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>DfcRho</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Ift</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Icp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>DfcBdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Prm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Dlt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Gmm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Veg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Prd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Black-76 of an interest rate option for IRG digitals. </p>
<p>Black-76 of an interest rate option for IRG digitals</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Dat</td><td>Calculation date </td></tr>
    <tr><td class="paramname">Clo</td><td>Maturity date of the option </td></tr>
    <tr><td class="paramname">Prx</td><td>Current price of the underlying. Usually, the forward rate (ex: 3.45) but for the MMfutures it will be its price (ex: 97.34) </td></tr>
    <tr><td class="paramname">Stk</td><td>Strike of the option. Same format than Prx </td></tr>
    <tr><td class="paramname">Dfc</td><td>Discount factor, calculated with a rate without risk, until maturity date of the option. In the irg (cap, floor) it will be the DF until the payment date </td></tr>
    <tr><td class="paramname">DfcRho</td><td>Discount factor, calculated with a rate without risk, for Rho calculation </td></tr>
    <tr><td class="paramname">Vol</td><td>Volatility (in pourcentage) </td></tr>
    <tr><td class="paramname">Cpu</td><td>'C': call, 'P': put </td></tr>
    <tr><td class="paramname">Ift</td><td>1: the value of DfcRho are taken into account. 0: calculations are made with both values to 1 </td></tr>
    <tr><td class="paramname">Icp</td><td>Irg Cap or Floor coupon value </td></tr>
    <tr><td class="paramname">DfcBdt</td><td>Risk free Discount factor. (until exercise date) ???????????? </td></tr>
    <tr><td class="paramname">Prm</td><td>(OUT) Option premium, in percent. To obtain the premium amount it should be multiplied by the notional and divided by 100. For the irg (cap, floors), it should be multiplied for the number of years of the 'loan', too. </td></tr>
    <tr><td class="paramname">Dlt</td><td>(OUT) Option delta, in unit, not percentages (for example, 23% will be 0.23). It can be used for calculate the premium for a new price. </td></tr>
    <tr><td class="paramname">Gmm</td><td>(OUT) Option gamma, in unit, not percentages (for example, 23% will be 0.23). It can be used for calculate the premium for a new price. </td></tr>
    <tr><td class="paramname">Veg</td><td>(OUT) Option vega, in percent. It can be used for calculate the premium for a new volatility. </td></tr>
    <tr><td class="paramname">Prd</td><td>Product </td></tr>
    <tr><td class="paramname">Dev</td><td>Currency</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ruben GIL - 23/Jan/2007</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Gotzon ETXEBERRIA - 09/Jan/2008: Do not divide Icp by 100.</li>
<li>Gotzon ETXEBERRIA - 24/Jan/2008: Use Black-76 instead of Black &amp; Scholes</li>
<li>Gotzon ETXEBERRIA - 24/Jan/2008: Remove some not needed parenthesys (brakets).</li>
<li>Gotzon ETXEBERRIA - 17/Jan/2012: Check if Prx negative set it no nearly zero</li>
<li>Gotzon ETXEBERRIA - 17/Jan/2012: Use DBL_M_EPSILON (Set Prx lower than DBL_M_EPSILON to DBL_M_EPSILON to avoid problems with the calculation algorithm)</li>
<li>Alex RODRIGUEZ - 19/Nov/2012: Correct header of function<ul>
<li>Alex RODRIGUEZ - 07/Nov/2014: Sonar corrections</li>
<li>Alex RODRIGUEZ - 21/Nov/2014: Sonar corrections</li>
</ul>
</li>
<li>Gotzon ETXEBERRIA - 12/May/2015: Use "MTHdisNsc" function instead of "normale" from cardinal. seeAlso : CalIntOpt, CalIntOptNor, CalIntOptIrgNor </li>
</ul>

</div>
</div>
<a class="anchor" id="a05448318d618d48e009d9dcef9ebcd4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CalIntOptIrgNor </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Clo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Prx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Stk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Dfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Icp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Prm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Prd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Black-76 of an interest rate option for IRG digitals. NORMAL VERSION (vs lognormal) </p>
<p>Black-76 of an interest rate option for IRG digitals</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Dat</td><td>Calculation date </td></tr>
    <tr><td class="paramname">Clo</td><td>Maturity date of the option </td></tr>
    <tr><td class="paramname">Prx</td><td>Current price of the underlying. Usually, the forward rate (ex: 3.45) but for the MMfutures it will be its price (ex: 97.34) </td></tr>
    <tr><td class="paramname">Stk</td><td>Strike of the option. Same format than Prx </td></tr>
    <tr><td class="paramname">Dfc</td><td>Discount factor, calculated with a rate without risk, until maturity date of the option. In the irg (cap, floor) it will be the DF until the payment date </td></tr>
    <tr><td class="paramname">Vol</td><td>Normal volatility (in percentage) </td></tr>
    <tr><td class="paramname">Cpu</td><td>'C': call, 'P': put </td></tr>
    <tr><td class="paramname">Icp</td><td>Irg Cap or Floor coupon value </td></tr>
    <tr><td class="paramname">Prm</td><td>(OUT) Option premium, in percent. To obtain the premium amount it should be multiplied by the notional and divided by 100. For the irg (cap, floors), it should be multiplied for the number of years of the 'loan', too. </td></tr>
    <tr><td class="paramname">Prd</td><td>Product </td></tr>
    <tr><td class="paramname">Dev</td><td>Currency</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Gotzon ETXEBERRIA - 29/JUN/2015</dd></dl>
<p>seeAlso : CalIntOptNor, CalIntOpt, CalIntOptIrg </p>

</div>
</div>
<a class="anchor" id="a7a01bce2973874770782e493ad4896af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int CalIntOptNor </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Clo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Prx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Stk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Dfc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Vol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Prm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Prd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Black &amp; Scholes of an interest rate option. NORMAL VERSION (vs lognormal) </p>
<p>Black &amp; Scholes of an interest rate option. The used basis is "ACT/360" instead of "ACT/365" for the cdsi to obtain same results than Bloomberg. For the rest of products the used basis is "ACT/365" The treated products in that method are:</p>
<ul>
<li>irg-s (caplets/floorlets)</li>
<li>cds options</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Dat</td><td>Calculation date </td></tr>
    <tr><td class="paramname">Clo</td><td>Maturity date of the option. For irg-s (Cap/floor) the maturity date will be the fixing date, that is, the beginning of the theoretical loan. </td></tr>
    <tr><td class="paramname">Prx</td><td>Current price of the underlying. Usually, the forward rate (ex: 3.45) but for the MMfutures it will be its price (ex: 97.34). </td></tr>
    <tr><td class="paramname">Stk</td><td>Strike of the option. Same format as Prx </td></tr>
    <tr><td class="paramname">Dfc</td><td>Discount factor, calculated with a rate without risk, until maturity date of the option. In the irg (cap, floor) it will be the DF until the payment date </td></tr>
    <tr><td class="paramname">Vol</td><td>Normal volatility (in percentage) </td></tr>
    <tr><td class="paramname">Cpu</td><td>'C': call, 'P': put </td></tr>
    <tr><td class="paramname">Prm</td><td>(OUT) Option premium, it is in the same units that Prx is. For MMfutures it will be in percent. To obtain the premium amount it should be multiplied by the notional and divided by 100.<ul>
<li>irg (cap, floors), it should be multiplied by the number of years of the 'loan'</li>
<li>CDS, CDSi: it should be multiplied by the BPV (or DV01 fwd) </li>
</ul>
</td></tr>
    <tr><td class="paramname">Prd</td><td>Product</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Gotzon ETXEBERRIA - 29/JUN/2015 </dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Gotzon ETXEBERRIA - 07/Jul/2015: Sustitute local lcMTHdisDen with MTHdisDen (math_def.h)</li>
</ul>
<p>seeAlso : CalIntOptIrgNor, CalIntOpt, CalIntOptIrg </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="fin__opt__fut_8c.html">fin_opt_fut.c</a></li>
    <li class="footer">Copyright &#169 ALMIS Informatica Financiera S.L. Reserved all the rights. Generated on Wed Jul 4 2018 22:33:48 for AFU by 
    <a href="http://www.almis.com">
    <img class="footer" src="DxyAlm.png" alt="ALMIS"/></a> </li>
  </ul>
</div>
</body>
</html>
