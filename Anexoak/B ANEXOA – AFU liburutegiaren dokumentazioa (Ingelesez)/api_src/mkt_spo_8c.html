<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>AFU: src/mktSpo.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AFU
   &#160;<span id="projectnumber">4.1</span>
   </div>
   <div id="projectbrief">ALMIS_Financial_utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mkt_spo_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mktSpo.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Market data - Forex spots of the day - Forex spot fixings.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;cardinal.h&gt;</code><br/>
<code>#include &lt;cst_def.h&gt;</code><br/>
<code>#include &lt;db_def.h&gt;</code><br/>
<code>#include &lt;dynDef.h&gt;</code><br/>
<code>#include &lt;errDef.h&gt;</code><br/>
<code>#include &lt;gb.h&gt;</code><br/>
<code>#include &lt;glbDef.h&gt;</code><br/>
<code>#include &lt;math_def.h&gt;</code><br/>
<code>#include &lt;mb_def.h&gt;</code><br/>
<code>#include &lt;obj_def.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="afu__def_8h_source.html">afu_def.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="afu__types_8h_source.html">afu_types.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mkt__def_8h_source.html">mkt_def.h</a>&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aad12ca93f1934eeab2c53afd7ed2fceb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#aad12ca93f1934eeab2c53afd7ed2fceb">MKT_SPO_TRT</a>&#160;&#160;&#160;7011</td></tr>
<tr class="separator:aad12ca93f1934eeab2c53afd7ed2fceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a769206899a066ddbcce2c6e6c8b90918"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a769206899a066ddbcce2c6e6c8b90918">MISSING_DAY_SPOT</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a769206899a066ddbcce2c6e6c8b90918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6293f25ad0bf8ed04c12195eea45b49"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#af6293f25ad0bf8ed04c12195eea45b49">FUTURE_SPOT_DATE</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:af6293f25ad0bf8ed04c12195eea45b49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e0b87ac919501448ed4ccf2ef259216"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a0e0b87ac919501448ed4ccf2ef259216">INCORRECT_DEV</a>&#160;&#160;&#160;30</td></tr>
<tr class="separator:a0e0b87ac919501448ed4ccf2ef259216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a471216b849792b161a4139675403b174"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a471216b849792b161a4139675403b174">SPO_ERR</a>&#160;&#160;&#160;40</td></tr>
<tr class="separator:a471216b849792b161a4139675403b174"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b57d1711661244e06f23c3cb8fd45fb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a8b57d1711661244e06f23c3cb8fd45fb">MIS_HIS_DAY_SPO</a>&#160;&#160;&#160;50</td></tr>
<tr class="separator:a8b57d1711661244e06f23c3cb8fd45fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a75df979633786b544f4cb825d0a006fe"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a75df979633786b544f4cb825d0a006fe">lcMKTspoChk</a> (void *LdTra, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt, int WarInf)</td></tr>
<tr class="memdesc:a75df979633786b544f4cb825d0a006fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls spot list.  <a href="#a75df979633786b544f4cb825d0a006fe"></a><br/></td></tr>
<tr class="separator:a75df979633786b544f4cb825d0a006fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25e167dc2b6bebe5c04f37a077118979"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a25e167dc2b6bebe5c04f37a077118979">lcMKTspoGetDev</a> (void *Ctx, void **LdDev)</td></tr>
<tr class="memdesc:a25e167dc2b6bebe5c04f37a077118979"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the list of active currencies not included in another currency.  <a href="#a25e167dc2b6bebe5c04f37a077118979"></a><br/></td></tr>
<tr class="separator:a25e167dc2b6bebe5c04f37a077118979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256d526a78949059d58c5924646b5064"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a256d526a78949059d58c5924646b5064">lcMKTspoFmt</a> (char *DevCrt, void *LdSpo)</td></tr>
<tr class="memdesc:a256d526a78949059d58c5924646b5064"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format the list of spots to show it in window referred to DevCrt.  <a href="#a256d526a78949059d58c5924646b5064"></a><br/></td></tr>
<tr class="separator:a256d526a78949059d58c5924646b5064"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab977156901441f754ab49e9fb077ba91"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#ab977156901441f754ab49e9fb077ba91">lcMKTspoReaSpo</a> (void *Ctx, char *Pro, char *Dat, char *Dev, void **LdSpo)</td></tr>
<tr class="memdesc:ab977156901441f754ab49e9fb077ba91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read spots to show in the entry spots window.  <a href="#ab977156901441f754ab49e9fb077ba91"></a><br/></td></tr>
<tr class="separator:ab977156901441f754ab49e9fb077ba91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aa6c072130add26e346172c57fead5e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a2aa6c072130add26e346172c57fead5e">MKTspoGetSpo</a> (void *Ctx, char *Pro, void *LdTra, void **LdMkt)</td></tr>
<tr class="memdesc:a2aa6c072130add26e346172c57fead5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load spots of the day.  <a href="#a2aa6c072130add26e346172c57fead5e"></a><br/></td></tr>
<tr class="separator:a2aa6c072130add26e346172c57fead5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8652d30d1315f0a9ee83131f14843816"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a8652d30d1315f0a9ee83131f14843816">MKTspoGetHis</a> (void *Ctx, char *Dat, char *Pro, char *Trt, int MktHis, void **LdMkt)</td></tr>
<tr class="memdesc:a8652d30d1315f0a9ee83131f14843816"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load spots of the day (historical)  <a href="#a8652d30d1315f0a9ee83131f14843816"></a><br/></td></tr>
<tr class="separator:a8652d30d1315f0a9ee83131f14843816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f65232f570083d980f12794bb4a253c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a0f65232f570083d980f12794bb4a253c">MKTspoChk</a> (void *LdTra, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt)</td></tr>
<tr class="memdesc:a0f65232f570083d980f12794bb4a253c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls spot list. It sets warning messages in case market data is missing.  <a href="#a0f65232f570083d980f12794bb4a253c"></a><br/></td></tr>
<tr class="separator:a0f65232f570083d980f12794bb4a253c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdc33a38c1467d1bfee667dab350059e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#abdc33a38c1467d1bfee667dab350059e">MKTspoChkInf</a> (void *LdTra, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt)</td></tr>
<tr class="memdesc:abdc33a38c1467d1bfee667dab350059e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls spot list. It sets info messages in case market data is missing.  <a href="#abdc33a38c1467d1bfee667dab350059e"></a><br/></td></tr>
<tr class="separator:abdc33a38c1467d1bfee667dab350059e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a423c40ef3bd123aee1a3517c6cf669af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a423c40ef3bd123aee1a3517c6cf669af">MKTspoFlt</a> (void *LdTra, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt)</td></tr>
<tr class="memdesc:a423c40ef3bd123aee1a3517c6cf669af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter spot prices list getting only the necessary one. No controls are done.  <a href="#a423c40ef3bd123aee1a3517c6cf669af"></a><br/></td></tr>
<tr class="separator:a423c40ef3bd123aee1a3517c6cf669af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3669f6ff9ea56e2e967d4139fddeb148"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a3669f6ff9ea56e2e967d4139fddeb148">MKTspoCal</a> (char *Dat, void *LdMkt)</td></tr>
<tr class="memdesc:a3669f6ff9ea56e2e967d4139fddeb148"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate all spots list.  <a href="#a3669f6ff9ea56e2e967d4139fddeb148"></a><br/></td></tr>
<tr class="separator:a3669f6ff9ea56e2e967d4139fddeb148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ee365dfffdaebf4a776bb62d4b47d50"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a8ee365dfffdaebf4a776bb62d4b47d50">MKTspoFind</a> (void *LdSpo, char *Dev, char *Ved, double *Spo)</td></tr>
<tr class="memdesc:a8ee365dfffdaebf4a776bb62d4b47d50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a spot for two currencies from a spot list.  <a href="#a8ee365dfffdaebf4a776bb62d4b47d50"></a><br/></td></tr>
<tr class="separator:a8ee365dfffdaebf4a776bb62d4b47d50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8125af33d820c224b251466d7b24f30a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a8125af33d820c224b251466d7b24f30a">MKTspoFindUnit</a> (void *Ctx, void *LdSpo, char *Dev, char *Ved, double *Spo)</td></tr>
<tr class="memdesc:a8125af33d820c224b251466d7b24f30a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a spot in Fox units for two currencies from a spot list.  <a href="#a8125af33d820c224b251466d7b24f30a"></a><br/></td></tr>
<tr class="separator:a8125af33d820c224b251466d7b24f30a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ddcbf99b8db2d17c069701d76a1326d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a5ddcbf99b8db2d17c069701d76a1326d">MKTspoCpFromDatToDat</a> (void *Ctx, char *SrcDat, char *DstDat)</td></tr>
<tr class="memdesc:a5ddcbf99b8db2d17c069701d76a1326d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy spots from a date to another, including all days in between.  <a href="#a5ddcbf99b8db2d17c069701d76a1326d"></a><br/></td></tr>
<tr class="separator:a5ddcbf99b8db2d17c069701d76a1326d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fca73a11626e2a9606c8cdde893e408"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a8fca73a11626e2a9606c8cdde893e408">MKTspoGetLdSpo</a> (void *Ctx, char *Dat, void **LdSpo)</td></tr>
<tr class="memdesc:a8fca73a11626e2a9606c8cdde893e408"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the list of spots of all active currencies against reference currency.  <a href="#a8fca73a11626e2a9606c8cdde893e408"></a><br/></td></tr>
<tr class="separator:a8fca73a11626e2a9606c8cdde893e408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c6f06557c44707ee3b0a600d66d0be2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a4c6f06557c44707ee3b0a600d66d0be2">MKTspoNorm</a> (void *Ctx, void *LdVal, char *RefDev, void **LdSpo)</td></tr>
<tr class="memdesc:a4c6f06557c44707ee3b0a600d66d0be2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalise a list obtained from table "spot".  <a href="#a4c6f06557c44707ee3b0a600d66d0be2"></a><br/></td></tr>
<tr class="separator:a4c6f06557c44707ee3b0a600d66d0be2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af26f393e6b4fb82168e51f0a09ea167c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#af26f393e6b4fb82168e51f0a09ea167c">MKTspoChkFxgSpo</a> (void *Ctx, char *Dat, char *Pro, char *AccDev, void *LdFxgSpot)</td></tr>
<tr class="memdesc:af26f393e6b4fb82168e51f0a09ea167c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare the fixing spots with the revaluation spots.  <a href="#af26f393e6b4fb82168e51f0a09ea167c"></a><br/></td></tr>
<tr class="separator:af26f393e6b4fb82168e51f0a09ea167c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac554ec8a1fcd3b33f7f9337637260d7d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#ac554ec8a1fcd3b33f7f9337637260d7d">MKTspoRea</a> (void *Ctx, char *Pro, char *Dev, void **LdSpo)</td></tr>
<tr class="memdesc:ac554ec8a1fcd3b33f7f9337637260d7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read spots to show in the entry spots window.  <a href="#ac554ec8a1fcd3b33f7f9337637260d7d"></a><br/></td></tr>
<tr class="separator:ac554ec8a1fcd3b33f7f9337637260d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07e53c906e99784f5d765788abde7161"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a07e53c906e99784f5d765788abde7161">MKTspoReaSpo</a> (void *Ctx, char *Pro, char *Dat, char *Dev, void **LdSpo)</td></tr>
<tr class="memdesc:a07e53c906e99784f5d765788abde7161"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read spots to show in the entry spots window.  <a href="#a07e53c906e99784f5d765788abde7161"></a><br/></td></tr>
<tr class="separator:a07e53c906e99784f5d765788abde7161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e522e0a3203e37bb652905548a4b8b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a8e522e0a3203e37bb652905548a4b8b5">MKTspoCnf</a> (void *Ctx, char *Pro, void *LdSpo)</td></tr>
<tr class="memdesc:a8e522e0a3203e37bb652905548a4b8b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Confirm spots from the entry spots window.  <a href="#a8e522e0a3203e37bb652905548a4b8b5"></a><br/></td></tr>
<tr class="separator:a8e522e0a3203e37bb652905548a4b8b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac44a61e93347efebb501fdc449824c74"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#ac44a61e93347efebb501fdc449824c74">MKTspfRea</a> (void *Ctx, char *Dat, char *Dev, void *LdObj, void **LdSpo)</td></tr>
<tr class="memdesc:ac44a61e93347efebb501fdc449824c74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read forex spots fixing.  <a href="#ac44a61e93347efebb501fdc449824c74"></a><br/></td></tr>
<tr class="separator:ac44a61e93347efebb501fdc449824c74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e6c0941fff665394c0d2fcb507da63c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a6e6c0941fff665394c0d2fcb507da63c">MKTspfCnf</a> (void *Ctx, char *Dat, void *LdSpo)</td></tr>
<tr class="memdesc:a6e6c0941fff665394c0d2fcb507da63c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Confirm forex spots fixing.  <a href="#a6e6c0941fff665394c0d2fcb507da63c"></a><br/></td></tr>
<tr class="separator:a6e6c0941fff665394c0d2fcb507da63c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0123389e9d4be1cfd60232f9917e0383"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a0123389e9d4be1cfd60232f9917e0383">MKTspoReaHis</a> (void *Ctx, char *Pro, char *Dev, char *Dat, void **LdSpo)</td></tr>
<tr class="memdesc:a0123389e9d4be1cfd60232f9917e0383"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read historic spots from the entry historic spots window.  <a href="#a0123389e9d4be1cfd60232f9917e0383"></a><br/></td></tr>
<tr class="separator:a0123389e9d4be1cfd60232f9917e0383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59685305f9668826d871159807552723"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a59685305f9668826d871159807552723">MKTspoCnfHis</a> (void *Ctx, char *Pro, char *Dat, void *LdSpo)</td></tr>
<tr class="memdesc:a59685305f9668826d871159807552723"><td class="mdescLeft">&#160;</td><td class="mdescRight">Confirm historic spots from the entry historic spots window.  <a href="#a59685305f9668826d871159807552723"></a><br/></td></tr>
<tr class="separator:a59685305f9668826d871159807552723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc323daaedac6732ba865daa26f48d57"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#abc323daaedac6732ba865daa26f48d57">MKTspoMkt2Spo</a> (void *Ctx, void *LdDta, char *Dat, void **LdSpo)</td></tr>
<tr class="memdesc:abc323daaedac6732ba865daa26f48d57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the list of spot market data into a list with spot format.  <a href="#abc323daaedac6732ba865daa26f48d57"></a><br/></td></tr>
<tr class="separator:abc323daaedac6732ba865daa26f48d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fdcc3134918613575a1d8d484e25eef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_spo_8c.html#a8fdcc3134918613575a1d8d484e25eef">MKTspoSetSpo</a> (void *LdMkt, char *Ctr, double Spo)</td></tr>
<tr class="memdesc:a8fdcc3134918613575a1d8d484e25eef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a dirty price in LdPri.  <a href="#a8fdcc3134918613575a1d8d484e25eef"></a><br/></td></tr>
<tr class="separator:a8fdcc3134918613575a1d8d484e25eef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Market data - Forex spots of the day - Forex spot fixings. </p>
<p>Market data.</p>
<ul>
<li>Forex spot fixings.</li>
<li>MKTspo (MarKeT Data SPOts).</li>
<li>Forex spots of the day.</li>
<li>MKTspf (MarKeT Data SPot fixing).</li>
</ul>
<dl class="section user"><dt>Header file</dt><dd><a class="el" href="mkt__def_8h.html" title="Header file for all MKT functions and types.">mkt_def.h</a></dd></dl>
<dl class="section user"><dt>Acronyme</dt><dd>MKTpo (MarKeT SPOt data)</dd></dl>
<dl class="section user"><dt>Library</dt><dd>mkt</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 19/Mar/1999.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="mkt_fsp_8c.html" title="Market data - Forex Swap-Points.">mktFsp.c</a>, Dev object, see <a class="el" href="mkt_8c.html" title="Market data general functions.">mkt.c</a> for details. </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="af6293f25ad0bf8ed04c12195eea45b49"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FUTURE_SPOT_DATE&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0e0b87ac919501448ed4ccf2ef259216"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INCORRECT_DEV&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8b57d1711661244e06f23c3cb8fd45fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIS_HIS_DAY_SPO&#160;&#160;&#160;50</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a769206899a066ddbcce2c6e6c8b90918"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MISSING_DAY_SPOT&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aad12ca93f1934eeab2c53afd7ed2fceb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MKT_SPO_TRT&#160;&#160;&#160;7011</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a471216b849792b161a4139675403b174"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPO_ERR&#160;&#160;&#160;40</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a75df979633786b544f4cb825d0a006fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKTspoChk </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>WarInf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Controls spot list. </p>
<p>Controls spot list. It removes spots for not used currencies except the currency defined into the 'FspDev' applicacion default option.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdTra</td><td>Stock list </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data object dynamic list </td></tr>
    <tr><td class="paramname">WarInf</td><td>Flag to indicate if the error messages are warnings (1), infos (0), nothing (-1). The last value 'nothing' (-1) is useful for only filtering the needed data but to not do the checking.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 19/Mar/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Iker ZURIARRAIN - 12/Oct/2005. Add IsCur parameter and give MIS_HIS_DAY_SPO warning.</li>
<li>Jon BARRUTIA - 25/Sep/2007: Set the 'FspDev' currency into the list to not remove it never</li>
<li>Josune BIKUNA - 24/Apr/2008: Add the object LdFrxf in the list of objects that need spots</li>
<li>Josune BIKUNA - 03/Feb/2015: Add the management od 'WarInf' parameter. See parameters</li>
<li>Josune BIKUNA - 03/Feb/2015: If no spots are needed, eliminate all the 'Spo' prices </li>
</ul>

</div>
</div>
<a class="anchor" id="a256d526a78949059d58c5924646b5064"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKTspoFmt </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DevCrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Format the list of spots to show it in window referred to DevCrt. </p>
<p>Format the list of spots to show it in window referred to DevCrt</p>
<ul>
<li><p class="startli">Initially LdSpo is related to reference currency and here it is converted into a list with same columns, but values are related to given currency (DevCrt)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">DevCrt</td><td>Currency to convert the list of spots. </td></tr>
    <tr><td class="paramname">LdSpo</td><td>(in/out) List of spots referred to reference currency</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 13/Dec/2000</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 13/Mar/2003: Only add currencies in EUR if they are active</li>
<li>Gotzon ETXEBERRIA - 27/May/2004: Use ERRchk instead of ERRass when calling to DYNcbn[Chk] </li>
</ul>
</li>
</ul>

</div>
</div>
<a class="anchor" id="a25e167dc2b6bebe5c04f37a077118979"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKTspoGetDev </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdDev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the list of active currencies not included in another currency. </p>
<p>Get the list of active currencies not included in another currency</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdDev</td><td>(out) List of currencies </td></tr>
    <tr><td class="paramname">+</td><td>dev Currency </td></tr>
    <tr><td class="paramname">+</td><td>cff Coefficient referred to reference currency </td></tr>
    <tr><td class="paramname">+</td><td>qus Quotation referred to reference currency </td></tr>
    <tr><td class="paramname">+</td><td>ved Reference currency</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 08/Jun/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 04/Nov/2002. Add column ved outside the SQL</li>
<li>Lorea NAVARRO - 22/Aug/2007. Change of dev table by afuCcy and the is_dev_in column by EurDev in the SELECT sentence</li>
<li>Basilio TAMAYO - 05/Oct/2007: Rename to fill file acronyme</li>
<li>Basilio TAMAYO - 19/Sep/2012: DYNaddColumns and DYNajoutexCol must have size with type size_t </li>
</ul>

</div>
</div>
<a class="anchor" id="ab977156901441f754ab49e9fb077ba91"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKTspoReaSpo </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read spots to show in the entry spots window. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>channel to database </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Dat</td><td>Date. </td></tr>
    <tr><td class="paramname">Dev</td><td>Currency </td></tr>
    <tr><td class="paramname">LdSpo</td><td>(out) Spots list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 02/Dec/2009: Unify current and historic spots. </dd></dl>

</div>
</div>
<a class="anchor" id="a6e6c0941fff665394c0d2fcb507da63c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspfCnf </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Confirm forex spots fixing. </p>
<p>Confirm forex spots fixing</p>
<ul>
<li>Note: This function is based in MKTspfConfirm of previous versions</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>channel to database </td></tr>
    <tr><td class="paramname">Dat</td><td>Fixing date </td></tr>
    <tr><td class="paramname">LdSpo</td><td>Spots list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Edurne GORDOA - 04/Apr/2002</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 04/Nov/2002. New parameter to MKTsavDta</li>
<li>Alex RODRIGUEZ - 15/Oct/2003. Initialise Vble. 'ColAls' to avoid w2k lint warnings.</li>
<li>Aitziber BARRERO - 22/Oct/2003. Remove Pro parameter, it is not neccesary</li>
<li>Jon BARRUTIA - 08/Jun/2004. Use MKTgetDffAls instead of MBOOKgetMktAls</li>
<li>Jon BARRUTIA - 08/Jun/2004: Check if LdAls exists</li>
<li>Jon BARRUTIA - 08/May/2008: Take books depending on treatment</li>
<li>Basilio TAMAYO - 06/Feb/2009: Differentiate terminal books (trading books) and books with other books in diffusion (Global View)</li>
<li>Basilio TAMAYO - 27/Apr/2009: Changed parameters in MKTgetAlsDat</li>
<li>Basilio TAMAYO - 02/Dec/2009: Use MKTcnf</li>
<li>Basilio TAMAYO - 17/Nov/2015: In trading book, do not diffuse to other books. </li>
</ul>

</div>
</div>
<a class="anchor" id="ac44a61e93347efebb501fdc449824c74"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspfRea </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read forex spots fixing. </p>
<p>Read forex spots fixing</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>channel to database </td></tr>
    <tr><td class="paramname">Dat</td><td>Fixing date </td></tr>
    <tr><td class="paramname">Dev</td><td>Currency </td></tr>
    <tr><td class="paramname">LdObj</td><td>Object list </td></tr>
    <tr><td class="paramname">LdSpo</td><td>(out) Spots list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Edurne GORDOA - 04/Apr/2002</dd></dl>
<dl class="section user"><dt>Modified</dt><dd>Edurne GORDOA - 04/Apr/2002<ul>
<li>Edurne GORDOA - 18/Apr/2002. Set warning if there are not prices. Set in the object list the prices list</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function is based in MKTspfRefresh of previous versions </dd></dl>

</div>
</div>
<a class="anchor" id="a3669f6ff9ea56e2e967d4139fddeb148"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoCal </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate all spots list. </p>
<p>Calculate all spots list</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Dat</td><td>Calculation date (unused) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: Ok)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 09/Jun/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 15/Dec/1999: Remove LdDev, not used.</li>
<li>Basilio TAMAYO - 13/Mar/2003: Only add currencies in EUR if they are active</li>
<li>Ramon MARTINEZ - 06/May/2003: Error with use of 'DYNgbGetData' and 'DYNputData'</li>
<li>Gotzon ETXEBERRIA - 27/May/2004: Use ERRchk instead of ERRass when calling to DYNcbn[Chk]</li>
<li>David ROMERO - 20/Apr/2015: Avoid Sonar warning (redundant asignment to itself) for unused parameter </li>
</ul>

</div>
</div>
<a class="anchor" id="a0f65232f570083d980f12794bb4a253c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoChk </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls spot list. It sets warning messages in case market data is missing. </p>
<p>Controls spot list. It removes spots for not used currencies except the currency defined into the 'FspDev' applicacion default option.</p>
<p>It sets warning messages in case market data is missing</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdTra</td><td>Stock list </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data object dynamic list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 19/Mar/1999 </dd></dl>

</div>
</div>
<a class="anchor" id="af26f393e6b4fb82168e51f0a09ea167c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoChkFxgSpo </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>AccDev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdFxgSpot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare the fixing spots with the revaluation spots. </p>
<p>Verify if the fixing spots passed as parameter are equal to those spots which have been used to revaluate deals. For each difference, a warning message will be created.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Dat</td><td>Calculation date </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">AccDev</td><td>Account currency </td></tr>
    <tr><td class="paramname">LdFxgSpot</td><td>List of fixing spots</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 04/Sep/2001</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 13/Sep/2001 Add the profile to the error message</li>
<li>Josune BIKUNA - 09/Nov/2001. Modify the error message</li>
<li>Ramon MARTINEZ - 18/Nov/2005: replace SPOTgetUnit by SPOTget</li>
<li>Basilio TAMAYO - 16/May/2006: Added parameter in MKTxxxGetHis</li>
<li>Josune BIKUNA - 01/Nov/2007: Add treatment parameter when calling MKTspoGetHis</li>
<li>Jon BARRUTIA - 21/Nov/2008: Use &lt;&gt; instead of !=</li>
<li>Josune BIKUNA - 23/Dec/2008: Check only the currencies present in the market spots which have been use to revaluate</li>
<li>Jon BARRUTIA - 01/Feb/2018: Correct for the case where the currency is quoted as DIRECT against the accounting currency </li>
</ul>

</div>
</div>
<a class="anchor" id="abdc33a38c1467d1bfee667dab350059e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoChkInf </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls spot list. It sets info messages in case market data is missing. </p>
<p>Controls spot list. It removes spots for not used currencies except the currency defined into the 'FspDev' applicacion default option.</p>
<p>It sets info messages in case market data is missing</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdTra</td><td>Stock list </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data object dynamic list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 19/Mar/1999 </dd></dl>

</div>
</div>
<a class="anchor" id="a8e522e0a3203e37bb652905548a4b8b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoCnf </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Confirm spots from the entry spots window. </p>
<p>Confirm spots from the entry spots window -Note: This function is based in MKTspoConfirm of previous versions</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>channel to database </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">LdSpo</td><td>Spots list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Edurne GORDOA - 04/Apr/2002</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 04/Nov/2002. New parameter to MKTsavDta</li>
<li>Jon BARRUTIA - 08/Jun/2004. Use MKTgetDffAls instead of MBOOKgetMktAls</li>
<li>Jon BARRUTIA - 08/Jun/2004: Check if LdAls exists</li>
<li>Jon BARRUTIA - 14/May/2008: Take diffusion books depending on diffusion books type, call to MKTgetDffTypAls</li>
<li>Basilio TAMAYO - 06/Feb/2009: Differentiate terminal books (trading books) and books with other books in diffusion (Global View)</li>
<li>Basilio TAMAYO - 27/Apr/2009: Changed parameters in MKTgetAlsDat</li>
<li>Basilio TAMAYO - 02/Dec/2009: Use MKTcnf </li>
</ul>

</div>
</div>
<a class="anchor" id="a59685305f9668826d871159807552723"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoCnfHis </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Confirm historic spots from the entry historic spots window. </p>
<p>Confirm historic spots from the entry historic spots window</p>
<ul>
<li>Note: This function is based in MKTspoConfirmHis of previous versions</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>channel to database </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Dat</td><td>Date </td></tr>
    <tr><td class="paramname">LdSpo</td><td>Spots list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Edurne GORDOA - 04/Apr/2002</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Jon BARRUTIA - 08/Jun/2004. Use MKTgetDffAls instead of MBOOKgetMktAls</li>
<li>Jon BARRUTIA - 14/May/2008: Take diffusion books depending on diffusion books type, call to MKTgetDffTypAls</li>
<li>Basilio TAMAYO - 06/Feb/2009: Differentiate terminal books (trading books) and books with other books in diffusion (Global View)</li>
<li>Basilio TAMAYO - 27/Apr/2009: Changed parameters in MKTgetAlsDat</li>
<li>Basilio TAMAYO - 17/Sep/2009: Add new parameter (Rmv) in MKTsavHisDta.</li>
<li>Basilio TAMAYO - 02/Dec/2009: use MKTcnfHis </li>
</ul>

</div>
</div>
<a class="anchor" id="a5ddcbf99b8db2d17c069701d76a1326d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoCpFromDatToDat </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>SrcDat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DstDat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy spots from a date to another, including all days in between. </p>
<p>Copy spots from a date to another, including all days in between.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Context to access to the DB </td></tr>
    <tr><td class="paramname">SrcDat</td><td>Source date </td></tr>
    <tr><td class="paramname">DstDat</td><td>Destination date</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK). algorithm:</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Gotzon ETXEBERRIA - 06/Oct/1999 (from DEBspot)</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Gotzon ETXEBERRIA - 25/Nov/1999: Add NbDays</li>
<li>Josune BIKUNA - 10/Nov/2005. Do not purge spots</li>
<li>Basilio TAMAYO - 26/Jan/2010: Remove extra select not used at all. </li>
</ul>

</div>
</div>
<a class="anchor" id="a8ee365dfffdaebf4a776bb62d4b47d50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoFind </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ved</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Spo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a spot for two currencies from a spot list. </p>
<p>Get a spot for two currencies from a spot list It returns Ved/Dev spot.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdSpo</td><td>Spots list </td></tr>
    <tr><td class="paramname">Dev</td><td>Reference currency </td></tr>
    <tr><td class="paramname">Ved</td><td>Conversion currency </td></tr>
    <tr><td class="paramname">Spo</td><td>(out) Spot</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: Ok)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 09/Jun/1999 </dd></dl>

</div>
</div>
<a class="anchor" id="a8125af33d820c224b251466d7b24f30a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoFindUnit </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ved</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Spo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a spot in Fox units for two currencies from a spot list. </p>
<p>Get a spot in Fox units for two currencies from a spot list</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Db connection </td></tr>
    <tr><td class="paramname">LdSpo</td><td>Spots list </td></tr>
    <tr><td class="paramname">Dev</td><td>Reference currency </td></tr>
    <tr><td class="paramname">Ved</td><td>Conversion currency </td></tr>
    <tr><td class="paramname">Spo</td><td>(out) Spot in Fox units</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: Ok)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 09/Jun/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Lorea NAVARRO - 24/Nov/2006: Use AFUccyGetIntDta function instead of infEchQnt and add Ctx parameter in this function.</li>
<li>Lorea NAVARRO - 23/Apr/2009: Correct the header. </li>
</ul>

</div>
</div>
<a class="anchor" id="a423c40ef3bd123aee1a3517c6cf669af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoFlt </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Filter spot prices list getting only the necessary one. No controls are done. </p>
<p>Filter bond prices list getting only the necessary one. No controls are done</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdTra</td><td>Deals object </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 03/Feb/2014 </dd></dl>

</div>
</div>
<a class="anchor" id="a8652d30d1315f0a9ee83131f14843816"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoGetHis </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>MktHis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load spots of the day (historical) </p>
<p>Load spots of the day (historical)</p>
<ul>
<li>If the database connection is MO, it will take historic market data</li>
<li>If the database connection is FO, it will take historic market data for the given treatment, for example, revaluation</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Dat</td><td>Spot date </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Trt</td><td>Treatment for which the historic market data must be recovered in case of FO book. if it is empty or NULL, revaluation treatment will be used. </td></tr>
    <tr><td class="paramname">MktHis</td><td>Flag to get all market data (mkt_his_all) or only used prices (mkt_his_use) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 08/Jun/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 19/Aug/1999. Substitute DYNlookUpInfo with DYNlookUp</li>
<li>Basilio TAMAYO - 15/Sep/2000. Get also column src</li>
<li>Edurne GORDOA - 28/Feb/2002. Get data from revaluation historic market data</li>
<li>Gotzon ETXEBERRIA - 14/Mar/2002: use mkt_dta_trt_aud</li>
<li>Gotzon ETXEBERRIA - 10/Jun/2003: use mkt_dta_his table if in MO (GV)</li>
<li>Basilio TAMAYO - 16/May/2006: Add parameter MktHis</li>
<li>Josune BIKUNA - 02/Jul/2007: Set the acronyme to the fields in the 'ORDER BY' clause</li>
<li>Basilio TAMAYO - 17/Oct/2007: Get also historic data from mkt_dta_his_arc</li>
<li>Josune BIKUNA - 01/Nov/2007: Add treatment parameter (Trt) for indicating which is the treatment the market data must be recovered for</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Basilio TAMAYO - 16/Feb/2012: Use standard function MKTgetHisDta</li>
<li>Asier SAMPIETRO - 18/Jan/2018: Add rest of db columns to lookUp </li>
</ul>

</div>
</div>
<a class="anchor" id="a8fca73a11626e2a9606c8cdde893e408"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoGetLdSpo </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the list of spots of all active currencies against reference currency. </p>
<p>Get the list of spots of all active currencies against reference currency</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Context to access to the DB </td></tr>
    <tr><td class="paramname">Dat</td><td>Date of spots </td></tr>
    <tr><td class="paramname">LdSpo</td><td>(out) List of spots</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK). algorithm:</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 07/Jun/2000</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 04/Nov/2002. Almis rules</li>
<li>Basilio TAMAYO - 05/Dec/2002: Comment function</li>
<li>Gotzon ETXEBERRIA - 27/May/2004: Use ERRchk instead of ERRass when calling to DYNcbn[Chk]</li>
<li>Basilio TAMAYO - 19/Sep/2012: DYNaddColumns and DYNajoutexCol must have size with type size_t </li>
</ul>

</div>
</div>
<a class="anchor" id="a2aa6c072130add26e346172c57fead5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoGetSpo </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load spots of the day. </p>
<p>Load spots of the day</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">LdTra</td><td>List of deals which may be used for stock sensible spot loading </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 08/Jun/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 19/Aug/1999: Substitute DYNlookUpInfo with DYNlookUp</li>
<li>Basilio TAMAYO - 15/May/2006: Add column sta and src</li>
<li>Josune BIKUNA - 24/Apr/2008: Add the object LdFrxf in the list of objects that need spots</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Remade </dd></dl>

</div>
</div>
<a class="anchor" id="abc323daaedac6732ba865daa26f48d57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoMkt2Spo </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdDta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the list of spot market data into a list with spot format. </p>
<p>Convert the list of spot market data into a list with spot format</p>
<ul>
<li>Add new lines to the list of spot market data to complete all active currencies.</li>
<li>Calculate the values of the newly completed lines with values in database</li>
<li><p class="startli">Convert the LdDta into the structure of table spot</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdDta</td><td>List of market data (columns imc and val) </td></tr>
    <tr><td class="paramname">Dat</td><td>Date </td></tr>
    <tr><td class="paramname">LdSpo</td><td>(out) List of spot values with columns dev1, val1, dev2, val2. To be used in gvSPOTSaveList. Dev1 is always reference currency and val1 1.0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 04/Nov/2002</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 05/Dec/2002: Correct inversion of values when an active currency is not in the original list of market data.</li>
<li>Ruben GIL -09/Nov/2006: Add DevRef variable in CSTreadPasDB function</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Basilio TAMAYO - 19/Sep/2012: DYNaddColumns and DYNajoutexCol must have size with type size_t</li>
<li>Jon BARRUTIA - 23/Mar/2018: Correct management of DIRECT/INDIRECT currencies</li>
<li>Jon BARRUTIA - 31/May/2018: Correct joining new spots with the existent ones; sort list before the DYNlookup </li>
</ul>
</li>
</ul>

</div>
</div>
<a class="anchor" id="a4c6f06557c44707ee3b0a600d66d0be2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoNorm </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdVal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>RefDev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Normalise a list obtained from table "spot". </p>
<p>Normalise a list obtained from table "spot". Convert a list with dev1, dev2, val1 and val2 columns into a LdSpo with the columns described in the heading of this module, that is: cod, ved and val. Input list has the spots between all combinations of two currencies Output list has only the spots between reference currency and all other currencies that have different meta-currency than RefDev</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdVal</td><td>(in) List of spot in fixing format (dev1, dev2, val1, val2) as obtained from SPOTinit. Assume that refDev is always in dev1 </td></tr>
    <tr><td class="paramname">RefDev</td><td>Reference currency for LdSpo </td></tr>
    <tr><td class="paramname">LdSpo</td><td>(out) List of spot in mkt format (cod, ved, val)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 17/Jul/2000</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 19/Jul/2000. New version </li>
</ul>

</div>
</div>
<a class="anchor" id="ac554ec8a1fcd3b33f7f9337637260d7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoRea </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read spots to show in the entry spots window. </p>
<p>Read spots to show in the entry spots window</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>channel to database </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Dev</td><td>Currency </td></tr>
    <tr><td class="paramname">LdSpo</td><td>(out) Spots list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Edurne GORDOA - 04/Apr/2002</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Edurne GORDOA - 18/Apr/2002. Set warning if there are not prices. Set in the object list the prices list</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Basilio TAMAYO - 02/Dec/2009: Use unified function lcMKTspoReaSpo.</li>
<li>Urko PINEDA - 22/Mar/2017: LdObj deleted. </li>
</ul>

</div>
</div>
<a class="anchor" id="a0123389e9d4be1cfd60232f9917e0383"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoReaHis </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read historic spots from the entry historic spots window. </p>
<p>Read historic spots from the entry historic spots window</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>channel to database </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Dev</td><td>Currency </td></tr>
    <tr><td class="paramname">Dat</td><td>Date </td></tr>
    <tr><td class="paramname">LdSpo</td><td>(out) Spots list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Edurne GORDOA - 04/Apr/2002</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Edurne GORDOA - 18/Apr/2002. Set warning if there are not prices. Set in the object list the prices list</li>
<li>Josune BIKUNA - 01/Nov/2007: Add treatment parameter to MKTgetHisDta</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Basilio TAMAYO - 02/Dec/2009: Use unified function lcMKTspoReaSpo.</li>
<li>Urko PINEDA - 22/Mar/2017: LdObj deleted. </li>
</ul>

</div>
</div>
<a class="anchor" id="a07e53c906e99784f5d765788abde7161"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoReaSpo </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read spots to show in the entry spots window. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Channel to database </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Dat</td><td>Date. </td></tr>
    <tr><td class="paramname">Dev</td><td>Currency </td></tr>
    <tr><td class="paramname">LdSpo</td><td>(out) Spots list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ismael SERRANO - 06/Jun/2010</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Ruben GIL - 04/Jun/2010: Added / character at the beginning of the * points </li>
</ul>

</div>
</div>
<a class="anchor" id="a8fdcc3134918613575a1d8d484e25eef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKTspoSetSpo </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ctr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Spo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a dirty price in LdPri. </p>
<p>Set a dirty price in LdPri for a contract</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdMkt</td><td>Market data list. The object 'Spo' must exist with the spot prices </td></tr>
    <tr><td class="paramname">Ctr</td><td>Contract </td></tr>
    <tr><td class="paramname">Spo</td><td>Spot price to update in the list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 28/Oct/2003 </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="mkt_spo_8c.html">mktSpo.c</a></li>
    <li class="footer">Copyright &#169 ALMIS Informatica Financiera S.L. Reserved all the rights. Generated on Wed Jul 4 2018 22:33:50 for AFU by 
    <a href="http://www.almis.com">
    <img class="footer" src="DxyAlm.png" alt="ALMIS"/></a> </li>
  </ul>
</div>
</body>
</html>
