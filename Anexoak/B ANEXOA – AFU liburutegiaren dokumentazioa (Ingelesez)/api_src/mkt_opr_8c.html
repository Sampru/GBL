<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>AFU: src/mktOpr.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AFU
   &#160;<span id="projectnumber">4.1</span>
   </div>
   <div id="projectbrief">ALMIS_Financial_utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mkt_opr_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mktOpr.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Market data - Option prices.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;carDef.h&gt;</code><br/>
<code>#include &lt;cardinal.h&gt;</code><br/>
<code>#include &lt;chaine.h&gt;</code><br/>
<code>#include &lt;cst_def.h&gt;</code><br/>
<code>#include &lt;db_def.h&gt;</code><br/>
<code>#include &lt;dynDef.h&gt;</code><br/>
<code>#include &lt;errDef.h&gt;</code><br/>
<code>#include &lt;fsa_def.h&gt;</code><br/>
<code>#include &lt;gb.h&gt;</code><br/>
<code>#include &lt;glbDef.h&gt;</code><br/>
<code>#include &lt;math_def.h&gt;</code><br/>
<code>#include &lt;mb_def.h&gt;</code><br/>
<code>#include &lt;obj_def.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="afu__def_8h_source.html">afu_def.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="afu__types_8h_source.html">afu_types.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mkt__def_8h_source.html">mkt_def.h</a>&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a740043182f8d5741d07d7817f46f865b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a740043182f8d5741d07d7817f46f865b">MKT_OPR_TRT</a>&#160;&#160;&#160;7010</td></tr>
<tr class="separator:a740043182f8d5741d07d7817f46f865b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b6d264e6120b1429bed6afd42da95ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a9b6d264e6120b1429bed6afd42da95ad">MIS_OPR</a>&#160;&#160;&#160;10  /* Missing option price               */</td></tr>
<tr class="separator:a9b6d264e6120b1429bed6afd42da95ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e92f5c6e6e056d6bd39797be1f1207e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a2e92f5c6e6e056d6bd39797be1f1207e">NO_OPTIONS</a>&#160;&#160;&#160;20  /* No option prices to show           */</td></tr>
<tr class="separator:a2e92f5c6e6e056d6bd39797be1f1207e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcebf88f138d0f728c8f783246c1b7cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#afcebf88f138d0f728c8f783246c1b7cb">NO_VOLATILITIES</a>&#160;&#160;&#160;30  /* No volatilities to show            */</td></tr>
<tr class="separator:afcebf88f138d0f728c8f783246c1b7cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea83405a48d423fd828d184baa448576"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#aea83405a48d423fd828d184baa448576">CANNOT_CAL_OPR</a>&#160;&#160;&#160;40  /* Cannot calculate options           */</td></tr>
<tr class="separator:aea83405a48d423fd828d184baa448576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0816309d4c39e7daae19704ff21d0630"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a0816309d4c39e7daae19704ff21d0630">CANNOT_CAL_VOL</a>&#160;&#160;&#160;50  /* Cannot calculate volatilities      */</td></tr>
<tr class="separator:a0816309d4c39e7daae19704ff21d0630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7993ef61e972bdca15962266b4f43479"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a7993ef61e972bdca15962266b4f43479">MIS_VOL</a>&#160;&#160;&#160;60  /* Missing option volatility          */</td></tr>
<tr class="separator:a7993ef61e972bdca15962266b4f43479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a188fe2233fa0683d6f225f47cd3c6942"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a188fe2233fa0683d6f225f47cd3c6942">MIS_HIS_OPR</a>&#160;&#160;&#160;70  /* Missing historic option price      */</td></tr>
<tr class="separator:a188fe2233fa0683d6f225f47cd3c6942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6780f755a84f19d3ebd26e232c07130"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#af6780f755a84f19d3ebd26e232c07130">MIS_HIS_VOL</a>&#160;&#160;&#160;80  /* Missing historic option volatility */</td></tr>
<tr class="separator:af6780f755a84f19d3ebd26e232c07130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9144da80fb1349d4d3a662be6e06b639"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a9144da80fb1349d4d3a662be6e06b639">EPSILON_VAL</a>&#160;&#160;&#160;0.00001</td></tr>
<tr class="separator:a9144da80fb1349d4d3a662be6e06b639"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adb2d934445f2941b06ce1b002321aae1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#adb2d934445f2941b06ce1b002321aae1">lcMKToprAddOopLab</a> (void *LdObj, void *LdOpr)</td></tr>
<tr class="memdesc:adb2d934445f2941b06ce1b002321aae1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add the label of organised/OTC to the options according to field oop.  <a href="#adb2d934445f2941b06ce1b002321aae1"></a><br/></td></tr>
<tr class="separator:adb2d934445f2941b06ce1b002321aae1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab2277d81127d55c7cf6ec95db55efef"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#aab2277d81127d55c7cf6ec95db55efef">lcMKToprCalCnvOprVol</a> (void *Ctx, char *Dat, void *LdMkt)</td></tr>
<tr class="memdesc:aab2277d81127d55c7cf6ec95db55efef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Market data calculations for option prices/volatilities convertions.  <a href="#aab2277d81127d55c7cf6ec95db55efef"></a><br/></td></tr>
<tr class="separator:aab2277d81127d55c7cf6ec95db55efef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6293057a9296178b7ff7be209d5d8e4b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a6293057a9296178b7ff7be209d5d8e4b">lcMKToprChk</a> (void *Ctx, void *LdTra, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt, int WarInf)</td></tr>
<tr class="memdesc:a6293057a9296178b7ff7be209d5d8e4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls option prices list and carries out basic calculations.  <a href="#a6293057a9296178b7ff7be209d5d8e4b"></a><br/></td></tr>
<tr class="separator:a6293057a9296178b7ff7be209d5d8e4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3b30088927aba00c581adc54cb0ba61"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#ad3b30088927aba00c581adc54cb0ba61">lcMKToprChkCnvOprVol</a> (void *LdTra, char *Dat, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt)</td></tr>
<tr class="memdesc:ad3b30088927aba00c581adc54cb0ba61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check market data correctness and completeness.  <a href="#ad3b30088927aba00c581adc54cb0ba61"></a><br/></td></tr>
<tr class="separator:ad3b30088927aba00c581adc54cb0ba61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6c63b7306c86a6a699ccce3fc41368"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#aae6c63b7306c86a6a699ccce3fc41368">lcMKToprChkOpr</a> (void *Ctx, void *LdTra, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt, int WarInf, void **LdOut)</td></tr>
<tr class="memdesc:aae6c63b7306c86a6a699ccce3fc41368"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls option prices in option list.  <a href="#aae6c63b7306c86a6a699ccce3fc41368"></a><br/></td></tr>
<tr class="separator:aae6c63b7306c86a6a699ccce3fc41368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf0962462a09da061210fbb5f9215513"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#abf0962462a09da061210fbb5f9215513">lcMKToprChkVol</a> (void *Ctx, void *LdTra, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt, int WarInf, void **LdOut)</td></tr>
<tr class="memdesc:abf0962462a09da061210fbb5f9215513"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls volatilities in option list.  <a href="#abf0962462a09da061210fbb5f9215513"></a><br/></td></tr>
<tr class="separator:abf0962462a09da061210fbb5f9215513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3cf713de1f0fca8900b831c6f6b9d57"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#ad3cf713de1f0fca8900b831c6f6b9d57">lcMKToprFndVal</a> (void *Ctx, void *LdOpr, char *Fld, char *Ctr, char *Cpu, char *Ech, double Stk, int Oop, char *Npa, char *Typ, double *Val)</td></tr>
<tr class="memdesc:ad3cf713de1f0fca8900b831c6f6b9d57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a double value in LdOpr.  <a href="#ad3cf713de1f0fca8900b831c6f6b9d57"></a><br/></td></tr>
<tr class="separator:ad3cf713de1f0fca8900b831c6f6b9d57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a569735ef5e30817efad80322bd47dcdc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a569735ef5e30817efad80322bd47dcdc">lcMKToprGetCnvOprVol</a> (void *Ctx, char *Dat, char *Pro, void *LdTra, void **LdMkt, int *IsCur)</td></tr>
<tr class="memdesc:a569735ef5e30817efad80322bd47dcdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the market data required for convertions between option and vol.  <a href="#a569735ef5e30817efad80322bd47dcdc"></a><br/></td></tr>
<tr class="separator:a569735ef5e30817efad80322bd47dcdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c1f6f837df81a44571179351ec8b7b8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a4c1f6f837df81a44571179351ec8b7b8">lcMKToprReaOpr</a> (void *Ctx, char *Obn, char *Pro, char *Dat, void *LdPos, void **LdOpr)</td></tr>
<tr class="memdesc:a4c1f6f837df81a44571179351ec8b7b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option prices entry refresh action.  <a href="#a4c1f6f837df81a44571179351ec8b7b8"></a><br/></td></tr>
<tr class="separator:a4c1f6f837df81a44571179351ec8b7b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c50677a61729fb5f5c636f7483fb61b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a6c50677a61729fb5f5c636f7483fb61b">lcMKToprCnfPrv</a> (void *Ctx, char *Pro, char *Dat, char *Obn, char *Wch, int CalOprVol, void **LdOpr)</td></tr>
<tr class="memdesc:a6c50677a61729fb5f5c636f7483fb61b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Previous function to option confirmation.  <a href="#a6c50677a61729fb5f5c636f7483fb61b"></a><br/></td></tr>
<tr class="separator:a6c50677a61729fb5f5c636f7483fb61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ee5555d6a53824c786b180308a7221f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a5ee5555d6a53824c786b180308a7221f">MKToprGetOpr</a> (void *Ctx, char *Pro, void *LdTra, void **LdMkt)</td></tr>
<tr class="memdesc:a5ee5555d6a53824c786b180308a7221f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load option prices + volatilities into a single data structure.  <a href="#a5ee5555d6a53824c786b180308a7221f"></a><br/></td></tr>
<tr class="separator:a5ee5555d6a53824c786b180308a7221f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e11f60a4c657e335bf2adb3028d272"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a06e11f60a4c657e335bf2adb3028d272">MKToprGetHis</a> (void *Ctx, char *Dat, char *Pro, char *Trt, int MktHis, void **LdMkt)</td></tr>
<tr class="memdesc:a06e11f60a4c657e335bf2adb3028d272"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load option prices + volatilities into data structure (historic)  <a href="#a06e11f60a4c657e335bf2adb3028d272"></a><br/></td></tr>
<tr class="separator:a06e11f60a4c657e335bf2adb3028d272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ef66a69f431ee751e5d22260520f13"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#ad9ef66a69f431ee751e5d22260520f13">MKToprChk</a> (void *Ctx, void *LdTra, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt)</td></tr>
<tr class="memdesc:ad9ef66a69f431ee751e5d22260520f13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls option prices list and carries out basic calculations.  <a href="#ad9ef66a69f431ee751e5d22260520f13"></a><br/></td></tr>
<tr class="separator:ad9ef66a69f431ee751e5d22260520f13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b537c0fb9c650b76e3e25cd67391be6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a5b537c0fb9c650b76e3e25cd67391be6">MKToprChkInf</a> (void *Ctx, void *LdTra, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt)</td></tr>
<tr class="memdesc:a5b537c0fb9c650b76e3e25cd67391be6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls option prices list and carries out basic calculations.  <a href="#a5b537c0fb9c650b76e3e25cd67391be6"></a><br/></td></tr>
<tr class="separator:a5b537c0fb9c650b76e3e25cd67391be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7365c2ffcc48e1127696c9b39962575"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#af7365c2ffcc48e1127696c9b39962575">MKToprFlt</a> (void *Ctx, void *LdTra, <a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a> IsCur, void *LdMkt)</td></tr>
<tr class="memdesc:af7365c2ffcc48e1127696c9b39962575"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filter option prices list getting only the necessary one. No controls are done.  <a href="#af7365c2ffcc48e1127696c9b39962575"></a><br/></td></tr>
<tr class="separator:af7365c2ffcc48e1127696c9b39962575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2256a52f8595fac1045580f28f6a206"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#af2256a52f8595fac1045580f28f6a206">MKToprCal</a> (void *LdMkt)</td></tr>
<tr class="memdesc:af2256a52f8595fac1045580f28f6a206"><td class="mdescLeft">&#160;</td><td class="mdescRight">Carry out calculations on LdOpr.  <a href="#af2256a52f8595fac1045580f28f6a206"></a><br/></td></tr>
<tr class="separator:af2256a52f8595fac1045580f28f6a206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0363e8b6fbc53ea07885c595ad88aa2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#af0363e8b6fbc53ea07885c595ad88aa2">MKToprCalSsy</a> (char *Dat, void *LdMkt)</td></tr>
<tr class="memdesc:af0363e8b6fbc53ea07885c595ad88aa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Carry out sensitivity calculations on LdOpr.  <a href="#af0363e8b6fbc53ea07885c595ad88aa2"></a><br/></td></tr>
<tr class="separator:af0363e8b6fbc53ea07885c595ad88aa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1acc571519ac2fc7e29e02a9ba8e4f7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#ac1acc571519ac2fc7e29e02a9ba8e4f7">MKToprFindOpr</a> (void *Ctx, void *LdOpr, char *Ctr, char *Cpu, char *Ech, double Stk, int Oop, char *Npa, char *Typ, double *Opr)</td></tr>
<tr class="memdesc:ac1acc571519ac2fc7e29e02a9ba8e4f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find an option price in LdOpr.  <a href="#ac1acc571519ac2fc7e29e02a9ba8e4f7"></a><br/></td></tr>
<tr class="separator:ac1acc571519ac2fc7e29e02a9ba8e4f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0f64f552f200639d63a74474a1d9a2a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#ae0f64f552f200639d63a74474a1d9a2a">MKToprFindVol</a> (void *Ctx, void *LdOpr, char *Ctr, char *Cpu, char *Ech, double Stk, int Oop, char *Npa, char *Typ, double *Vol)</td></tr>
<tr class="memdesc:ae0f64f552f200639d63a74474a1d9a2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a volatility price in LdOpr.  <a href="#ae0f64f552f200639d63a74474a1d9a2a"></a><br/></td></tr>
<tr class="separator:ae0f64f552f200639d63a74474a1d9a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07536c75fce370faa77924583f7d61e5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a07536c75fce370faa77924583f7d61e5">MKToprFindDlt</a> (void *Ctx, void *LdOpr, char *Ctr, char *Cpu, char *Ech, double Stk, int Oop, char *Npa, char *Typ, double *Dlt)</td></tr>
<tr class="memdesc:a07536c75fce370faa77924583f7d61e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find an option sensitivify in LdOpr.  <a href="#a07536c75fce370faa77924583f7d61e5"></a><br/></td></tr>
<tr class="separator:a07536c75fce370faa77924583f7d61e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a194d8636afec8ee70e96316c3281ff20"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a194d8636afec8ee70e96316c3281ff20">MKToprCnvOptVol</a> (void *Ctx, char *Dat, char *Pro, char *Obn, char *Wch, void *LdOpr)</td></tr>
<tr class="memdesc:a194d8636afec8ee70e96316c3281ff20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert options to volatilities or volatilities to options.  <a href="#a194d8636afec8ee70e96316c3281ff20"></a><br/></td></tr>
<tr class="separator:a194d8636afec8ee70e96316c3281ff20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2d817ed1f36e6915327340438be6a00"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#ab2d817ed1f36e6915327340438be6a00">MKToprCnvOprToVol</a> (char *Dat, char *Wch, void *LdDta, void *LdMkt)</td></tr>
<tr class="memdesc:ab2d817ed1f36e6915327340438be6a00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert option prices into volatilities.  <a href="#ab2d817ed1f36e6915327340438be6a00"></a><br/></td></tr>
<tr class="separator:ab2d817ed1f36e6915327340438be6a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad62c797d0d82f4326c0ef490bec48391"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#ad62c797d0d82f4326c0ef490bec48391">MKToprCnvVolToOpr</a> (char *Dat, char *Wch, void *LdDta, void *LdMkt)</td></tr>
<tr class="memdesc:ad62c797d0d82f4326c0ef490bec48391"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert volatilities into option prices.  <a href="#ad62c797d0d82f4326c0ef490bec48391"></a><br/></td></tr>
<tr class="separator:ad62c797d0d82f4326c0ef490bec48391"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc013c22a2625f573136e5704276fc7c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#afc013c22a2625f573136e5704276fc7c">MKToprUpdateImc</a> (void *Ctx, void **LdStk)</td></tr>
<tr class="memdesc:afc013c22a2625f573136e5704276fc7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates market data codes internal market codes (IMC).  <a href="#afc013c22a2625f573136e5704276fc7c"></a><br/></td></tr>
<tr class="separator:afc013c22a2625f573136e5704276fc7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1be8caaec904a7820885b9f4326e2954"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a1be8caaec904a7820885b9f4326e2954">MKToprUpdateImcFromList</a> (void *Ctx, void *LdStk)</td></tr>
<tr class="memdesc:a1be8caaec904a7820885b9f4326e2954"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates market data codes internal market codes (IMC) from a list.  <a href="#a1be8caaec904a7820885b9f4326e2954"></a><br/></td></tr>
<tr class="separator:a1be8caaec904a7820885b9f4326e2954"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72c818c2a13c583f2daed232800311fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a72c818c2a13c583f2daed232800311fc">MKToprRea</a> (void *Ctx, char *Obn, char *Pro, void *LdPos, void *LdObj, void **LdOpr)</td></tr>
<tr class="memdesc:a72c818c2a13c583f2daed232800311fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option prices entry refresh action.  <a href="#a72c818c2a13c583f2daed232800311fc"></a><br/></td></tr>
<tr class="separator:a72c818c2a13c583f2daed232800311fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2901a695fa9479d62458c0c8cd47af6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#ae2901a695fa9479d62458c0c8cd47af6">MKToprCnf</a> (void *Ctx, char *Pro, char *Obn, char *Wch, int CalOprVol, void *LdObj, void *LdOpr)</td></tr>
<tr class="memdesc:ae2901a695fa9479d62458c0c8cd47af6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option price entry confirm action.  <a href="#ae2901a695fa9479d62458c0c8cd47af6"></a><br/></td></tr>
<tr class="separator:ae2901a695fa9479d62458c0c8cd47af6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae133fcc46236ec8c8282108de2d5da15"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#ae133fcc46236ec8c8282108de2d5da15">MKToprReaHis</a> (void *Ctx, char *Obn, char *Pro, char *Dat, void *LdPos, void *LdObj, void **LdOpr)</td></tr>
<tr class="memdesc:ae133fcc46236ec8c8282108de2d5da15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Historic bond option prices entry refresh action.  <a href="#ae133fcc46236ec8c8282108de2d5da15"></a><br/></td></tr>
<tr class="separator:ae133fcc46236ec8c8282108de2d5da15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68d2755a6d59d0950ab7a67a09f38f9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a68d2755a6d59d0950ab7a67a09f38f9c">MKToprCnfHis</a> (void *Ctx, char *Obn, char *Wch, char *Pro, char *Dat, int CalOprVol, void *LdOpr)</td></tr>
<tr class="memdesc:a68d2755a6d59d0950ab7a67a09f38f9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Option price historic entry confirm action.  <a href="#a68d2755a6d59d0950ab7a67a09f38f9c"></a><br/></td></tr>
<tr class="separator:a68d2755a6d59d0950ab7a67a09f38f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5832775d40c19f5f189c783737710f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#ae5832775d40c19f5f189c783737710f1">MKToprAddImc</a> (void *Ctx, void *LdOpr, void *LdVol)</td></tr>
<tr class="memdesc:ae5832775d40c19f5f189c783737710f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the market data codes for option price and volatility.  <a href="#ae5832775d40c19f5f189c783737710f1"></a><br/></td></tr>
<tr class="separator:ae5832775d40c19f5f189c783737710f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aecf5325b8b43a5becd13ea2fc5446c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mkt_opr_8c.html#a9aecf5325b8b43a5becd13ea2fc5446c">MKToprFndImc</a> (void *LdOpr, char *Fld, char *Imc, double *Opr)</td></tr>
<tr class="memdesc:a9aecf5325b8b43a5becd13ea2fc5446c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find an option price in LdOpr.  <a href="#a9aecf5325b8b43a5becd13ea2fc5446c"></a><br/></td></tr>
<tr class="separator:a9aecf5325b8b43a5becd13ea2fc5446c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Market data - Option prices. </p>
<dl class="section user"><dt>Header file</dt><dd><a class="el" href="mkt__def_8h.html" title="Header file for all MKT functions and types.">mkt_def.h</a></dd></dl>
<dl class="section user"><dt>Acronyme</dt><dd>MKTopr (MarKeT Data Option PRices)</dd></dl>
<dl class="section user"><dt>Library</dt><dd>mkt</dd></dl>
<p>Market data - Option prices. See <a class="el" href="mkt_8c.html" title="Market data general functions.">mkt.c</a> for details.</p>
<ul>
<li></li>
<li>Object: Opr, list of option prices. Sorted by ctr, cpu, stk, ech <hr/>
</li>
<li></li>
<li>Name Type Origin Description <hr/>
</li>
<li>cod CTR_TYPE mkt_mcd.cod Contract</li>
<li>npa NPA_TYPE tra_ouv.tc_npa Ticket number (only used for structured)</li>
<li>BlnTyp char (3) tra_ouv.tr_typ Blind type ('bls', 'bln')</li>
<li>ech CDA_TYPE tra_ouv.to_ech Maturity</li>
<li>stk DBL_TYPE tra_ouv.to_stk Strike</li>
<li>cpu CPU_TYPE tra_ouv.to_cpu Call/Put</li>
<li>oop ITR_TYPE tra_ouv.to_oop Organised option (1) or not (0)</li>
<li>opr DBL_TYPE mkt_dta.val Option price</li>
<li>vol DBL_TYPE mkt_dta.val Option volatility</li>
<li>opd DBL_TYPE MKToprCal () Option price, in decimal mode</li>
<li>dlt DBL_TYPE MKToprCalSsy () Delta</li>
<li>gmm DBL_TYPE MKToprCalSsy () Gamma</li>
<li>veg DBL_TYPE MKToprCalSsy () Vega</li>
<li>tht DBL_TYPE MKToprCalSsy () Theta</li>
<li><p class="startli">rho DBL_TYPE MKToprCalSsy () Rho</p>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 24/May/1999 </dd></dl>
</li>
</ul>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aea83405a48d423fd828d184baa448576"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CANNOT_CAL_OPR&#160;&#160;&#160;40  /* Cannot calculate options           */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0816309d4c39e7daae19704ff21d0630"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CANNOT_CAL_VOL&#160;&#160;&#160;50  /* Cannot calculate volatilities      */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9144da80fb1349d4d3a662be6e06b639"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EPSILON_VAL&#160;&#160;&#160;0.00001</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a188fe2233fa0683d6f225f47cd3c6942"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIS_HIS_OPR&#160;&#160;&#160;70  /* Missing historic option price      */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af6780f755a84f19d3ebd26e232c07130"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIS_HIS_VOL&#160;&#160;&#160;80  /* Missing historic option volatility */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9b6d264e6120b1429bed6afd42da95ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIS_OPR&#160;&#160;&#160;10  /* Missing option price               */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7993ef61e972bdca15962266b4f43479"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIS_VOL&#160;&#160;&#160;60  /* Missing option volatility          */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a740043182f8d5741d07d7817f46f865b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MKT_OPR_TRT&#160;&#160;&#160;7010</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2e92f5c6e6e056d6bd39797be1f1207e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NO_OPTIONS&#160;&#160;&#160;20  /* No option prices to show           */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="afcebf88f138d0f728c8f783246c1b7cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NO_VOLATILITIES&#160;&#160;&#160;30  /* No volatilities to show            */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="adb2d934445f2941b06ce1b002321aae1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKToprAddOopLab </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdOpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add the label of organised/OTC to the options according to field oop. </p>
<p>Add the label of organised/OTC to the options according to field oop</p>
<ul>
<li><p class="startli">List of option has an integer column oop, convert it into a string column</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdObj</td><td>List of objects of the window </td></tr>
    <tr><td class="paramname">LdOpr</td><td>(in/out) List of options</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 18/Jun/2001</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 19/Sep/2012: DYNaddColumns and DYNajoutexCol must have size with type size_t </li>
</ul>
</li>
</ul>

</div>
</div>
<a class="anchor" id="aab2277d81127d55c7cf6ec95db55efef"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKToprCalCnvOprVol </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Market data calculations for option prices/volatilities convertions. </p>
<p>Market data calculations for option prices/volatilities convertions This function carries out the market data calculations calculations necessary for convertions between option prices and volatilities.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Dat</td><td>Calculation date </td></tr>
    <tr><td class="paramname">LdMkt</td><td>List of market data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 24/Jun/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 28/Jun/1999: Add MKTpriCal</li>
<li>Basilio TAMAYO - 13/Jul/1999: Add MKTfprCal</li>
<li>Edurne GORDOA - 28/Nov/2000: Add MKTnprCal</li>
<li>Gotzon ETXEBERRIA - 17/Dec/2001: MKTyldCal before MKTpriCal</li>
<li>Lorea NAVARRO - 23/Nov/2006: Add Ctx parameter in MKTpriCal function</li>
<li>Lorea NAVARRO - 27/Nov/2006: Add Ctx parameter in MKTeprCal, MKTnprCal function</li>
<li>David ROMERO - 16/Nov/2015: Remove LdTra (List of deals) function parameter </li>
</ul>

</div>
</div>
<a class="anchor" id="a6293057a9296178b7ff7be209d5d8e4b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKToprChk </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>WarInf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Controls option prices list and carries out basic calculations. </p>
<p>Controls option prices list and carries out basic calculations, such as joining option prices and volatilities into only one structure and adding information.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdTra</td><td>Stock list </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data object dynamic list </td></tr>
    <tr><td class="paramname">WarInf</td><td>Flag to indicate if the error messages are warnings (1), infos (0), nothing (-1). The last value 'nothing' (-1) is useful for only filtering the needed data but to not do the checking.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 24/May/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd>Basilio TAMAYO - 19/Aug/1999. Substitute DYNlookUpInfo with DYNlookUp<ul>
<li>Basilio TAMAYO - 18/Jun/2001 break into two functions, one for option prices and the other for option volatilities</li>
<li>Iker ZURIARRAIN - 12/Oct/2005. Add IsCur parameter and give MIS_HIS_OPR warning. Also change MISSING_OPR to MIS_OPR</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Josune BIKUNA - 03/Feb/2014: Add the managment of 'WarInf' parameter. See parameters </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="ad3b30088927aba00c581adc54cb0ba61"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKToprChkCnvOprVol </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check market data correctness and completeness. </p>
<p>Verify if we have all market data we need to launch a conversion between options and volatilities and whether these are correct. This function checks everything and generates a detailed report in the error list (err_functions). Appropriate means to print these warnings should be provided.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdTra</td><td>List of deals </td></tr>
    <tr><td class="paramname">Dat</td><td>Checked date </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>List of market data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 24/Jun/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 25/Jun/1999: Add MKTfprChk</li>
<li>Josune BIKUNA - 28/Jun/1999: Add MKTeprChk, MKTpriChk</li>
<li>Edurne GORDOA - 28/Nov/2000: Add MKTnprChk</li>
<li>Gotzon ETXEBERRIA - 18/May/2001: Add Dat param</li>
<li>Basilio TAMAYO - 08/Jul/2002. Added parameter to MKTyldChk</li>
<li>Iker ZURIARRAIN - 12/Oct/2005. Add IsCur parameter. </li>
</ul>

</div>
</div>
<a class="anchor" id="aae6c63b7306c86a6a699ccce3fc41368"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKToprChkOpr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>WarInf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Controls option prices in option list. </p>
<p>Controls option prices in option list Verify that all options have their price defined</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdTra</td><td>Stock list </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>Market data object dynamic list </td></tr>
    <tr><td class="paramname">WarInf</td><td>Flag to indicate if the error messages are warnings (1), infos (0), nothing (-1). The last value 'nothing' (-1) is useful for only filtering the needed data but to not do the checking. </td></tr>
    <tr><td class="paramname">LdOut</td><td>(out) List of option prices</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 18/Jun/2001</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 08/Aug/2001: Add LdBlno</li>
<li>Josune BIKUNA - 23/Jun/2003: Add LdBlnoBde</li>
<li>Iker ZURIARRAIN - 14/Oct/2005. Add IsCur parameter</li>
<li>Ruben GIL -09/Nov/2006: Add StrRetDat variable in rdbtouser function</li>
<li>Josune BIKUNA - 16/Oct/2007: Get also the option price status (sta) and source (src) in the returned list of option prices</li>
<li>Jon BARRUTIA - 05/Sep/2008: Take more columns (npa, BlnTyp). Used for structured blinds.</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Lorea NAVARRO - 16/Feb/2010: Add the control for the Imc column</li>
<li>Edurne GORDOA - 01/Dic/2015: Set data in the message depending on the existing columns. Set the message in the message list if WarInf parameter is not -1 </li>
</ul>

</div>
</div>
<a class="anchor" id="abf0962462a09da061210fbb5f9215513"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKToprChkVol </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>WarInf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Controls volatilities in option list. </p>
<p>Controls volatilities in option list Verify that all options have their volatility defined</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdTra</td><td>Stock list </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>Market data object dynamic list </td></tr>
    <tr><td class="paramname">WarInf</td><td>Flag to indicate if the error messages are warnings (1), infos (0), nothing (-1). The last value 'nothing' (-1) is useful for only filtering the needed data but to not do the checking. </td></tr>
    <tr><td class="paramname">LdOut</td><td>(out) List of volatilies for options that really need it</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 18/Jun/2001</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Iker ZURIARRAIN - 12/Oct/2005. Add IsCur parameter and give MIS_HIS_VOL warning. Also change MISSING_VOL to MIS_VOL.</li>
<li>Ruben GIL -09/Nov/2006: Add StrRetDat variable in rdbtouser function</li>
<li>Jon BARRUTIA - 05/Sep/2008: Take more columns (npa, BlnTyp), used for structured blinds.</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Basilio TAMAYO - 19/Sep/2012: DYNaddColumns and DYNajoutexCol must have size with type size_t </li>
</ul>

</div>
</div>
<a class="anchor" id="a6c50677a61729fb5f5c636f7483fb61b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKToprCnfPrv </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Obn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Wch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>CalOprVol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdOpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Previous function to option confirmation. </p>
<p>Previous function to option confirmation.</p>
<ul>
<li>Calculate volatility from option price and vice-versa</li>
<li><p class="startli">Save the internal market data codes in all books.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Dat</td><td>Date </td></tr>
    <tr><td class="paramname">Obn</td><td>Object name ("Opr", "Vol") </td></tr>
    <tr><td class="paramname">Wch</td><td>Which product ("Bnd", "Fut", "Equ", "Bld") </td></tr>
    <tr><td class="paramname">CalOprVol</td><td>Flag that indicates if option from volatilities and vice-versa must be calculated </td></tr>
    <tr><td class="paramname">LdOpr</td><td>(in/out) Option prices list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 02/Dec/2009: Unify current and historic </dd></dl>
</li>
</ul>

</div>
</div>
<a class="anchor" id="ad3cf713de1f0fca8900b831c6f6b9d57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKToprFndVal </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdOpr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ctr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Stk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Oop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Npa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Typ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find a double value in LdOpr. </p>
<p>Find a double value in LdOpr for a contract, call/put and strike.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdOpr</td><td>Option prices list </td></tr>
    <tr><td class="paramname">Fld</td><td>Field to recover: "opd", "vol", "dlt" </td></tr>
    <tr><td class="paramname">Ctr</td><td>Contract </td></tr>
    <tr><td class="paramname">Cpu</td><td>Call/put </td></tr>
    <tr><td class="paramname">Ech</td><td>Maturity </td></tr>
    <tr><td class="paramname">Stk</td><td>Strike </td></tr>
    <tr><td class="paramname">Oop</td><td>Organised option or not </td></tr>
    <tr><td class="paramname">Npa</td><td>Ticket number. If not a blind, set NULL. </td></tr>
    <tr><td class="paramname">Typ</td><td>Type of a blind (AFU_BLD_BLS or AFU_BLD_BLN). If not a blind set AFU_BLD_BLN. </td></tr>
    <tr><td class="paramname">Val</td><td>(out) Returned value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 24/May/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 12/Jul/1999: Return the value of column "opd" (already converted), not "val"</li>
<li>Basilio TAMAYO - 18/Jun/2001: Add parameter Oop to get the imc</li>
<li>Jon BARRUTIA - 05/Sep/2008: Treat structured blind options. Taken from MKToprFindOpr</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Lorea NAVARRO - 16/Feb/2010: Add MKToprFndImc</li>
<li>Basilio TAMAYO - 19/Sep/2012: DYNaddColumns and DYNajoutexCol must have size with type size_t </li>
</ul>

</div>
</div>
<a class="anchor" id="a569735ef5e30817efad80322bd47dcdc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKToprGetCnvOprVol </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdMkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>IsCur</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the market data required for convertions between option and vol. </p>
<p>Get the market data required for convertions between option and vol</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Dat</td><td>Date </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">LdTra</td><td>List of deals </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(out) List of market data </td></tr>
    <tr><td class="paramname">IsCur</td><td>(out) Current or historic data (datCur: Current, datHis: Historic)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 24/Jun/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 25/Jun/1999: Add MKTfprGetFpr</li>
<li>Josune BIKUNA - 28/Jun/1999: Add MKTeprGetEpr, MKTpriGetPri</li>
<li>Josune BIKUNA - 29/Jun/1999: Add MKTctrGetCtr</li>
<li>Basilio TAMAYO - 17/Oct/2000. Add parameter Dat</li>
<li>Edurne GORDOA - 28/Nov/2000: Add MKTnprGetNpr</li>
<li>Basilio TAMAYO - 20/Mar/2001. Allow past dates</li>
<li>Josune BIKUNA - 07/Feb/2003. Remove Dat parameter when calling MKTeprGetEpr and MKTnprGetNpr. These functions recover currenct prices so Dat is not necessary.</li>
<li>Iker ZURIARRAIN - 12/Oct/2005. Add IsCur output parameter.</li>
<li>Basilio TAMAYO - 16/May/2006: New paremeters in MKTxxxGetHis</li>
<li>Josune BIKUNA - 01/Nov/2007: Add treatment parameter when calling to MKTxxxGetHis </li>
</ul>

</div>
</div>
<a class="anchor" id="a4c1f6f837df81a44571179351ec8b7b8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcMKToprReaOpr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Obn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdOpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Option prices entry refresh action. </p>
<p>Option prices entry refresh action</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Obn</td><td>Object name ("Opr", "Vol") </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Dat</td><td>Date, if NULL get current market data </td></tr>
    <tr><td class="paramname">LdPos</td><td>Position list </td></tr>
    <tr><td class="paramname">LdOpr</td><td>(out) option prices list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 02/Dec/2009: Unify functions to get current and historic options </dd></dl>

</div>
</div>
<a class="anchor" id="ae5832775d40c19f5f189c783737710f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprAddImc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdOpr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdVol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the market data codes for option price and volatility. </p>
<p>Update the market data codes for option price and volatility</p>
<ul>
<li>Create or update market datum of new option deals</li>
<li>Do not delete because it could happen that there are more than one deal with same values and the market datum would be still necessary. par : <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context (FO book) </td></tr>
    <tr><td class="paramname">LdOpr</td><td>List of values for option price: npa, typ, cod, dev, prd, ech, cpu, stk, imc. It can be NULL </td></tr>
    <tr><td class="paramname">LdVol</td><td>List of values for option volatility: npa, typ, cod, dev, prd, ech, cpu, stk, imc. It can be NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 07/Apr/2004</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Jon BARRUTIA - 08/Jun/2004. Use MKTgetDffAls instead of MBOOKgetMktAls</li>
<li>Jon BARRUTIA - 08/Jun/2004: Check if LdAls exists</li>
<li>Jon BARRUTIA - 14/May/2008: Take diffusion books depending on diffusion books type, call to MKTgetDffTypAls</li>
<li>Jon BARRUTIA - 19/May/2008: Call to MKTgetDffAls instead of MKTgetDffTypAls. This function will be called from FO. It will go to his 'hook' to get the diffusion books. So it is not necessary to limit the books, it won't arrive never to a master MO book (multi-site).</li>
<li>Jon BARRUTIA - 18/Jul/2008: It receives a list with the deals data instead of a deal number </li>
</ul>
</li>
</ul>

</div>
</div>
<a class="anchor" id="af2256a52f8595fac1045580f28f6a206"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprCal </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Carry out calculations on LdOpr. </p>
<p>Carry out calculations on LdOpr</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdMkt</td><td>(in/out) List of market data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 13/Jul/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 12/May/2005: new parameter Ctr in CVTprice </li>
</ul>

</div>
</div>
<a class="anchor" id="af0363e8b6fbc53ea07885c595ad88aa2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprCalSsy </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Carry out sensitivity calculations on LdOpr. </p>
<p>Carry out sensitivity calculations on LdOpr: delta, gamma, vega, theta and rho.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Dat</td><td>Calculation date </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) List of market data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 23/Jul/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Ramon MARTINEZ - 21/Apr/2005: Sustitue fin_opt_fut by CalIntOpt</li>
<li>Ramon MARTINEZ - 18/Dec/2006: Sustitute in CalIntOpt Rat by Dfc and use ERRchk with it </li>
</ul>

</div>
</div>
<a class="anchor" id="ad9ef66a69f431ee751e5d22260520f13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprChk </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls option prices list and carries out basic calculations. </p>
<p>Controls option prices list and carries out basic calculations, such as joining option prices and volatilities into only one structure and adding information.</p>
<p>Warning messages are set in case market data is missing</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdTra</td><td>Stock list </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data object dynamic list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 24/May/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd>Basilio TAMAYO - 19/Aug/1999. Substitute DYNlookUpInfo with DYNlookUp<ul>
<li>Basilio TAMAYO - 18/Jun/2001 break into two functions, one for option prices and the other for option volatilities</li>
<li>Iker ZURIARRAIN - 12/Oct/2005. Add IsCur parameter and give MIS_HIS_OPR warning. Also change MISSING_OPR to MIS_OPR</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a5b537c0fb9c650b76e3e25cd67391be6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprChkInf </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls option prices list and carries out basic calculations. </p>
<p>Controls option prices list and carries out basic calculations, such as joining option prices and volatilities into only one structure and adding information.</p>
<p>Info messages are set in case market data is missing</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdTra</td><td>Stock list </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data object dynamic list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 04/Feb/2015 </dd></dl>

</div>
</div>
<a class="anchor" id="ae2901a695fa9479d62458c0c8cd47af6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprCnf </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Obn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Wch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>CalOprVol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdOpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Option price entry confirm action. </p>
<p>Option price entry confirm action</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Obn</td><td>Object name ("Opr", "Vol") </td></tr>
    <tr><td class="paramname">Wch</td><td>Which product ("Bnd", "Fut", "Equ", "Bld") </td></tr>
    <tr><td class="paramname">CalOprVol</td><td>Flag that indicates if option from volatilities and vice-versa must be calculated </td></tr>
    <tr><td class="paramname">LdObj</td><td>Objects list. </td></tr>
    <tr><td class="paramname">LdOpr</td><td>Option prices list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 24/May/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 21/Jun/1999: Save values as well as volatilities if they are options, or as options if they are volatilities</li>
<li>Basilio TAMAYO - 03/Jan/2000: Bug in the initialisation of LdAllCnv</li>
<li>Basilio TAMAYO -15/Aug/2000. If GV, update historic for fox date</li>
<li>Basilio TAMAYO - 15/Jun/2001 Not calculate volatility from price neither price from volatility on option on equity.</li>
<li>Josune BIKUNA - 03/Aug/2001. Add Blind product (Bld)</li>
<li>Basilio TAMAYO - 28/Sep/2001. Not calculate volatility from price if the option is not organised</li>
<li>Edurne GORDOA - 28/Feb/2002. If we are in FOX connect to GV to get historical market data</li>
<li>Edurne GORDOA - 12/Apr/2002. Separate interface with engines and C treatment</li>
<li>Edurne GORDOA - 19/Sep/2002. Do not change connection to GV before calling to MKToprCnvOptVol</li>
<li>Basilio TAMAYO - 04/Nov/2002. New parameter to MKTsavDta</li>
<li>Aitziber BARRERO - 14/Oct/2003: Avoid warnings</li>
<li>Basilio TAMAYO - 27/Apr/2009: Changed parameters in MKTgetAlsDat</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Basilio TAMAYO - 02/Dec/2009: Use unified function lcMKToprCnfPrv. </li>
</ul>

</div>
</div>
<a class="anchor" id="a68d2755a6d59d0950ab7a67a09f38f9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprCnfHis </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Obn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Wch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>CalOprVol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdOpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Option price historic entry confirm action. </p>
<p>Option price historic entry confirm action</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Obn</td><td>Object name ("Opr", "Vol") </td></tr>
    <tr><td class="paramname">Wch</td><td>Which product ("Bnd", "Fut", "Equ", "Bld") </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Dat</td><td>Date </td></tr>
    <tr><td class="paramname">CalOprVol</td><td>Flag that indicates if option from volatilities and vice-versa must be calculated </td></tr>
    <tr><td class="paramname">LdOpr</td><td>Option prices list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 15/Jun/2000</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 01/Sep/2000. Diffuse data to foxes in date</li>
<li>Basilio TAMAYO - 15/Sep/2000. Get also column src</li>
<li>Basilio TAMAYO - 15/Mar/2001. Save also definitions, not only values</li>
<li>Basilio TAMAYO - 15/Jun/2001 Not calculate volatility from price neither price from volatility on option on equity.</li>
<li>Josune BIKUNA - 03/Aug/2001. Add Blind product (Bld)</li>
<li>Basilio TAMAYO - 28/Sep/2001. Not calculate volatility from price if the option is not organised</li>
<li>Edurne GORDOA - 12/Apr/2002. Separate interface with engines and C treatment</li>
<li>Jon BARRUTIA - 08/Jun/2004. Use MKTgetDffAls instead of MBOOKgetMktAls</li>
<li>Jon BARRUTIA - 08/Jun/2004: Check if LdAls exists</li>
<li>Jon BARRUTIA - 14/May/2008: Take diffusion books depending on diffusion books type, call to MKTgetDffTypAls</li>
<li>Basilio TAMAYO - 06/Feb/2009: Differentiate terminal books (trading books) and books with other books in diffusion (Global View)</li>
<li>Basilio TAMAYO - 27/Apr/2009: Changed parameters in MKTgetAlsDat</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Basilio TAMAYO - 17/Sep/2009: Add new parameter (Rmv) in MKTsavHisDta. </li>
</ul>

</div>
</div>
<a class="anchor" id="ab2d817ed1f36e6915327340438be6a00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprCnvOprToVol </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Wch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdDta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert option prices into volatilities. </p>
<p>Convert option prices which are in LdDta into volatilities</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Dat</td><td>Date </td></tr>
    <tr><td class="paramname">Wch</td><td>Which product ("Bnd", "Fut", "Equ", "Bld") </td></tr>
    <tr><td class="paramname">LdDta</td><td>Data list </td></tr>
    <tr><td class="paramname">LdMkt</td><td>Market data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error Code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 24-JUN-1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 03/Aug/2001. Add Blind product (Bld)</li>
<li>Aitziber BARRERO - 14/Oct/2003: Avoid warnings</li>
<li>Ramon MARTINEZ - 21/Apr/2005: Sustitue fin_opt_fut by CalIntOpt</li>
<li>Basilio TAMAYO - 12/May/2005: new parameter Cod in CVTprice</li>
<li>Ramon MARTINEZ - 18/Dec/2006: Sustitute in CalIntOpt Rat by Dfc and use ERRchk with it </li>
</ul>

</div>
</div>
<a class="anchor" id="a194d8636afec8ee70e96316c3281ff20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprCnvOptVol </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Obn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Wch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdOpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert options to volatilities or volatilities to options. </p>
<p>Convert options to volatilities or volatilities to options</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Dat</td><td>Reference date </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Obn</td><td>Object name ("Opr", "Vol") corresponding to the data type of LdOpr </td></tr>
    <tr><td class="paramname">Wch</td><td>Which product ("Bnd", "Fut", "Equ", "Bld") </td></tr>
    <tr><td class="paramname">LdOpr</td><td>Data list.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 24/Jun/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 03/Aug/2001. Add Blind product (Bld)</li>
<li>Iker ZURIARRAIN - 12/Oct/2005. Add parameter to lcMKToprGetCnvOprVol and lcMKToprChkCnvOprVol</li>
<li>David ROMERO - 16/Apr/2015: Remove Ctx parameter from lcMKToprCalCnvOprVol function call </li>
</ul>

</div>
</div>
<a class="anchor" id="ad62c797d0d82f4326c0ef490bec48391"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprCnvVolToOpr </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Wch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdDta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert volatilities into option prices. </p>
<p>Convert volatilities which are in LdDta into option prices</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Dat</td><td>Date </td></tr>
    <tr><td class="paramname">Wch</td><td>Which product ("Bnd", "Fut", "Equ", "Bld") </td></tr>
    <tr><td class="paramname">LdDta</td><td>Data list </td></tr>
    <tr><td class="paramname">LdMkt</td><td>Market data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error Code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 24-JUN-1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 03/Aug/2001. Add Blind product (Bld)</li>
<li>Aitziber BARRERO - 14/Oct/2003: Avoid warnings</li>
<li>Alex RODRIGUEZ - 15/Oct/2003. Correct compilations errors.</li>
<li>Ramon MARTINEZ - 21/Apr/2005: Sustitue fin_opt_fut by CalIntOpt</li>
<li>Ramon MARTINEZ - 18/Dec/2006: Sustitute in CalIntOpt Rat by Dfc and use ERRchk with it </li>
</ul>

</div>
</div>
<a class="anchor" id="a07536c75fce370faa77924583f7d61e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprFindDlt </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdOpr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ctr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Stk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Oop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Npa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Typ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Dlt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find an option sensitivify in LdOpr. </p>
<p>Find an option sensitivify in LdOpr for a contract, call/put and strike.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdOpr</td><td>Option prices list </td></tr>
    <tr><td class="paramname">Ctr</td><td>Contract </td></tr>
    <tr><td class="paramname">Cpu</td><td>Call/put </td></tr>
    <tr><td class="paramname">Ech</td><td>Maturity </td></tr>
    <tr><td class="paramname">Stk</td><td>Strike </td></tr>
    <tr><td class="paramname">Oop</td><td>Organised option or not </td></tr>
    <tr><td class="paramname">Npa</td><td>Ticket number. If not a blind, set NULL. </td></tr>
    <tr><td class="paramname">Typ</td><td>Type of a blind (AFU_BLD_BLS or AFU_BLD_BLN). If not a blind set AFU_BLD_BLN. </td></tr>
    <tr><td class="paramname">Dlt</td><td>(out) Option price</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code 0: Ok -1: Not found</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 22/Jul/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Jon BARRUTIA - 05/Sep/2008: Call to lcMKToprFndVal</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter </li>
</ul>

</div>
</div>
<a class="anchor" id="ac1acc571519ac2fc7e29e02a9ba8e4f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprFindOpr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdOpr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ctr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Stk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Oop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Npa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Typ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Opr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find an option price in LdOpr. </p>
<p>Find an option price in LdOpr for a contract, call/put and strike.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdOpr</td><td>Option prices list </td></tr>
    <tr><td class="paramname">Ctr</td><td>Contract </td></tr>
    <tr><td class="paramname">Cpu</td><td>Call/put </td></tr>
    <tr><td class="paramname">Ech</td><td>Maturity </td></tr>
    <tr><td class="paramname">Stk</td><td>Strike </td></tr>
    <tr><td class="paramname">Oop</td><td>Organised option or not </td></tr>
    <tr><td class="paramname">Npa</td><td>Ticket number. If not a blind, set NULL. </td></tr>
    <tr><td class="paramname">Typ</td><td>Type of a blind (AFU_BLD_BLS or AFU_BLD_BLN). If not a blind set AFU_BLD_BLN. </td></tr>
    <tr><td class="paramname">Opr</td><td>(out) Option price</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 24/May/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 12/Jul/1999: Return the value of column "opd" (already converted), not "val"</li>
<li>Basilio TAMAYO - 18/Jun/2001: Add parameter Oop to get the imc</li>
<li>Jon BARRUTIA - 05/Sep/2008: Treat structured blind options</li>
<li>Jon BARRUTIA - 05/Sep/2008: Call to lcMKToprFndVal</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter </li>
</ul>

</div>
</div>
<a class="anchor" id="ae0f64f552f200639d63a74474a1d9a2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprFindVol </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdOpr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ctr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Cpu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Stk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Oop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Npa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Typ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Vol</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find a volatility price in LdOpr. </p>
<p>Find a volatility price in LdOpr for a contract, call/put and strike.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdOpr</td><td>Option and volatility prices list </td></tr>
    <tr><td class="paramname">Ctr</td><td>Contract </td></tr>
    <tr><td class="paramname">Cpu</td><td>Call/put </td></tr>
    <tr><td class="paramname">Ech</td><td>Maturity </td></tr>
    <tr><td class="paramname">Stk</td><td>Strike </td></tr>
    <tr><td class="paramname">Oop</td><td>Organised option or not </td></tr>
    <tr><td class="paramname">Npa</td><td>Ticket number. If not a blind, set NULL. </td></tr>
    <tr><td class="paramname">Typ</td><td>Type of a blind (AFU_BLD_BLS or AFU_BLD_BLN). If not a blind set AFU_BLD_BLN. </td></tr>
    <tr><td class="paramname">Vol</td><td>(out) Volatility price</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: Ok)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 30/Mar/2001</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 18/Jun/2001 Add parameter Oop to get the imc</li>
<li>Jon BARRUTIA - 05/Sep/2008: Call to lcMKToprFndVal</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter </li>
</ul>

</div>
</div>
<a class="anchor" id="af7365c2ffcc48e1127696c9b39962575"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprFlt </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="afu__types_8h.html#a8e6dc39e1a845a7e90e4bbff510df6d1">AFUdatCurHis</a>&#160;</td>
          <td class="paramname"><em>IsCur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Filter option prices list getting only the necessary one. No controls are done. </p>
<p>Filter option prices list getting only the necessary one. No controls are done</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdTra</td><td>Stock list </td></tr>
    <tr><td class="paramname">IsCur</td><td>Current or historic data (datCur: Current, datHis: Historic) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data object dynamic list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 04/Feb/2015 </dd></dl>

</div>
</div>
<a class="anchor" id="a9aecf5325b8b43a5becd13ea2fc5446c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprFndImc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdOpr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Imc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Opr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find an option price in LdOpr. </p>
<p>Find an option price in LdOpr by Imc.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdOpr</td><td>Blind Option price list </td></tr>
    <tr><td class="paramname">Fld</td><td>Field to recover: "opd", "vol", "dlt" </td></tr>
    <tr><td class="paramname">Imc</td><td>Internal marke code </td></tr>
    <tr><td class="paramname">Opr</td><td>(out) Blin Option price</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 : Ok)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Lorea NAVARRO - 16/Feb/2010 </dd></dl>

</div>
</div>
<a class="anchor" id="a06e11f60a4c657e335bf2adb3028d272"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprGetHis </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>MktHis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load option prices + volatilities into data structure (historic) </p>
<p>Load option prices + volatilities into data structure (historic) Adds 2 objects to the market data structure ("Opr" and "Vol"), but in the checking phase, both are grouped into only one ("Opr").</p>
<ul>
<li>If the database connection is MO, it will take historic market data</li>
<li>If the database connection is FO, it will take historic market data for the given treatment, for example, revaluation</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Dat</td><td>Date </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Trt</td><td>Treatment for which the historic market data must be recovered in case of FO book. if it is empty or NULL, revaluation treatment will be used. </td></tr>
    <tr><td class="paramname">MktHis</td><td>Flag to get all market data (mkt_his_all) or only used prices (mkt_his_use) </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Gotzon ETXEBERRIA - 06/Aug/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 15/Sep/2000. Get also column src</li>
<li>Edurne GORDOA - 28/Feb/2002. Get data from mkt_dta_rdd_aud</li>
<li>Gotzon ETXEBERRIA - 14/Mar/2002: use mkt_dta_trt_aud</li>
<li>Josune BIKUNA - 03/Dec/2003. Use mkt_dta_trt_aud or mkt_dta_his depending if in GV or not</li>
<li>Basilio TAMAYO - 16/May/2006: Add parameter MktHis</li>
<li>Basilio TAMAYO - 17/Oct/2007: Get also historic data from mkt_dta_his_arc</li>
<li>Josune BIKUNA - 01/Nov/2007: Add treatment parameter (Trt) for indicating which is the treatment the market data must be recovered for</li>
<li>Basilio TAMAYO - 16/Feb/2012: Use standard function MKTgetHisDta </li>
</ul>

</div>
</div>
<a class="anchor" id="a5ee5555d6a53824c786b180308a7221f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprGetOpr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdTra</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdMkt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load option prices + volatilities into a single data structure. </p>
<p>Load option prices + volatilities into a single data structure Adds 2 objects to the market data structure ("Opr" and "Vol"), but in the checking phase, both are grouped into only one ("Opr").</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">LdTra</td><td>List of deals be used for stock sensible market data loading </td></tr>
    <tr><td class="paramname">LdMkt</td><td>(in/out) Market data structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 24/May/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Ramon MARTINEZ - 22/May/2000: LdMmfo</li>
<li>Josune BIKUNA - 25/Jun/2001: Add LdEquo when verifying if the prices are necessary.</li>
<li>Josune BIKUNA - 08/Aug/2001: Add LdBlno</li>
<li>Josune BIKUNA - 23/Jun/2003: Add LdBlnoBde</li>
<li>Basilio TAMAYO - 27/Jul/2004: Add LdIfuo and LdEfuo </li>
</ul>

</div>
</div>
<a class="anchor" id="a72c818c2a13c583f2daed232800311fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprRea </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Obn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdOpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Option prices entry refresh action. </p>
<p>Option prices entry refresh action</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Obn</td><td>Object name ("Opr", "Vol") </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">LdPos</td><td>Position list </td></tr>
    <tr><td class="paramname">LdObj</td><td>Object list </td></tr>
    <tr><td class="paramname">LdOpr</td><td>(out) option prices list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 24/May/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 21/Jun/1999: Add val column when getting LdOpr</li>
<li>Josune BIKUNA - 25/Jun/1999: Add 'crv' parameter in LdOpr</li>
<li>Basilio TAMAYO - 15/Sep/2000. Get also column src</li>
<li>Josune BIKUNA - 03/Aug/2001. Add Blind product (Bld)</li>
<li>Edurne GORDOA - 12/Apr/2002. Separate interface with engines and C treatment</li>
<li>Edurne GORDOA - 18/Apr/2002. Set warning if there are not prices. Set in the object list the prices list</li>
<li>Edurne GORDOA - 09/Jul/2002. Use App global variable to know if we have the position list by book</li>
<li>Jon BARRUTIA - 18/Jul/2008: Add the ticket number to the list. Done because the IMC of the structured blinds is the ticket number so it must show it.</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Basilio TAMAYO - 02/Dec/2009: Use unified function lcMKToprReaOpr </li>
</ul>

</div>
</div>
<a class="anchor" id="ae133fcc46236ec8c8282108de2d5da15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprReaHis </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Obn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pro</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdPos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdObj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdOpr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Historic bond option prices entry refresh action. </p>
<p>Historic bond option prices entry refresh action</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>GV Database context </td></tr>
    <tr><td class="paramname">Obn</td><td>Object name ("Opr", "Vol") </td></tr>
    <tr><td class="paramname">Pro</td><td>Profile </td></tr>
    <tr><td class="paramname">Dat</td><td>Date </td></tr>
    <tr><td class="paramname">LdPos</td><td>Position list </td></tr>
    <tr><td class="paramname">LdObj</td><td>Object list </td></tr>
    <tr><td class="paramname">LdOpr</td><td>(out) option prices list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK).</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 15/Jun/2000</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 15/Sep/2000. Get also column src</li>
<li>Edurne GORDOA - 12/Apr/2002. Separate interface with engines and C treatment</li>
<li>Edurne GORDOA - 18/Apr/2002. Set warning if there are not prices. Set in the object list the prices list</li>
<li>Edurne GORDOA - 09/Jul/2002. Remove LdAls parameter, we can call to this function only from a GV database</li>
<li>Josune BIKUNA - 01/Nov/2007: Add treatment parameter to MKTgetHisDta</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Basilio TAMAYO - 02/Dec/2009: Use unified function lcMKToprReaOpr </li>
</ul>

</div>
</div>
<a class="anchor" id="afc013c22a2625f573136e5704276fc7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprUpdateImc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdStk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates market data codes internal market codes (IMC). </p>
<p>Updates market data codes internal market codes (IMC). It returns the list of all distinct option deals characteristics in order to enable updating Global View.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context. </td></tr>
    <tr><td class="paramname">LdStk</td><td>(out) List of open options (used for Global view)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 10/Aug/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 18/Jun/2001: Add column oop</li>
<li>Jon BARRUTIA - 18/Jul/2008: Added some fields to the data selection to treat the structured blinds </li>
</ul>

</div>
</div>
<a class="anchor" id="a1be8caaec904a7820885b9f4326e2954"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MKToprUpdateImcFromList </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdStk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates market data codes internal market codes (IMC) from a list. </p>
<p>Updates market data codes internal market codes (IMC) from a list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context. </td></tr>
    <tr><td class="paramname">LdStk</td><td>List of options</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 10/Aug/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Basilio TAMAYO - 18/Jun/2001. Remove column oop once the imc is</li>
<li>Jon BARRUTIA - 30/Jul/2008: Remove also columns npa and BlnTyp</li>
<li>Alex RODRIGUEZ - 16/Jun/2009: Add Ctx parameter to MKTmcdSetImc function.</li>
<li>Ruben GIL - 23/Aug/2012: Add call to MKTmcdHis function to historice market data codification </li>
</ul>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="mkt_opr_8c.html">mktOpr.c</a></li>
    <li class="footer">Copyright &#169 ALMIS Informatica Financiera S.L. Reserved all the rights. Generated on Wed Jul 4 2018 22:33:50 for AFU by 
    <a href="http://www.almis.com">
    <img class="footer" src="DxyAlm.png" alt="ALMIS"/></a> </li>
  </ul>
</div>
</body>
</html>
