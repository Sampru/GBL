<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>AFU: src/GvSpots.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AFU
   &#160;<span id="projectnumber">4.1</span>
   </div>
   <div id="projectbrief">ALMIS_Financial_utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_gv_spots_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">GvSpots.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Global View spots.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;cardinal.h&gt;</code><br/>
<code>#include &lt;carDef.h&gt;</code><br/>
<code>#include &lt;cst_def.h&gt;</code><br/>
<code>#include &lt;db_def.h&gt;</code><br/>
<code>#include &lt;dynDef.h&gt;</code><br/>
<code>#include &lt;errDef.h&gt;</code><br/>
<code>#include &lt;fml_def.h&gt;</code><br/>
<code>#include &lt;gb.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="afu__def_8h_source.html">afu_def.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="mkt__def_8h_source.html">mkt_def.h</a>&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:acb3f158b288ad6a5bd7b70d84961da5a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#acb3f158b288ad6a5bd7b70d84961da5a">SPOTS_TRT</a>&#160;&#160;&#160;7000</td></tr>
<tr class="separator:acb3f158b288ad6a5bd7b70d84961da5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad50eca04a45ab7a038ca2e7382e60b6b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#ad50eca04a45ab7a038ca2e7382e60b6b">MISSING_SPOT</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:ad50eca04a45ab7a038ca2e7382e60b6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa0b9c52b8b584d46d680b1cff4a30a94"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#aa0b9c52b8b584d46d680b1cff4a30a94">lcgvSPOTScalculate</a> (char *Date, void *LdSpotsToCalc, void **LdSpoSav)</td></tr>
<tr class="memdesc:aa0b9c52b8b584d46d680b1cff4a30a94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate missing spots.  <a href="#aa0b9c52b8b584d46d680b1cff4a30a94"></a><br/></td></tr>
<tr class="separator:aa0b9c52b8b584d46d680b1cff4a30a94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4670806f8562140376b2f3296458fc3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#ab4670806f8562140376b2f3296458fc3">lcgvSPOTSsavSpoAls</a> (void *Ctx, char *Dat, void *LdSpo)</td></tr>
<tr class="memdesc:ab4670806f8562140376b2f3296458fc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save a list of fixing spots in current database.  <a href="#ab4670806f8562140376b2f3296458fc3"></a><br/></td></tr>
<tr class="separator:ab4670806f8562140376b2f3296458fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450122996986a6ae4cbccb8c52dccd3a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#a450122996986a6ae4cbccb8c52dccd3a">gvSPOTSgetList</a> (void *Ctx, char *Date, void **LdSpotOut)</td></tr>
<tr class="memdesc:a450122996986a6ae4cbccb8c52dccd3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get list of spots, deleting the devIn.  <a href="#a450122996986a6ae4cbccb8c52dccd3a"></a><br/></td></tr>
<tr class="separator:a450122996986a6ae4cbccb8c52dccd3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb0feee306c8f5c57fccc76aac797eac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#abb0feee306c8f5c57fccc76aac797eac">gvSPOTSsaveList</a> (void *Ctx, char *Date, void *LdSpotToSave, void *LdAls)</td></tr>
<tr class="memdesc:abb0feee306c8f5c57fccc76aac797eac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save a list of spots.  <a href="#abb0feee306c8f5c57fccc76aac797eac"></a><br/></td></tr>
<tr class="separator:abb0feee306c8f5c57fccc76aac797eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af35004c505672bb09b15834dd7990385"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#af35004c505672bb09b15834dd7990385">gvSPOTScontrol</a> (void *Ctx, char *Date, void **LdMisSpo)</td></tr>
<tr class="memdesc:af35004c505672bb09b15834dd7990385"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control missing spots.  <a href="#af35004c505672bb09b15834dd7990385"></a><br/></td></tr>
<tr class="separator:af35004c505672bb09b15834dd7990385"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0248ebb033e04842580f81ded2b25dc8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#a0248ebb033e04842580f81ded2b25dc8">SPOTctrlErr</a> (void *Ctx, char *Date)</td></tr>
<tr class="memdesc:a0248ebb033e04842580f81ded2b25dc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control spots and assign errors to error list.  <a href="#a0248ebb033e04842580f81ded2b25dc8"></a><br/></td></tr>
<tr class="separator:a0248ebb033e04842580f81ded2b25dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e12b949ccc6beab5bad5c54848a06e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#a0e12b949ccc6beab5bad5c54848a06e8">gvSPOTgetUnit</a> (void *Ctx, void *LdSpot, char *DevRef, char *DevCvt, double *Spot)</td></tr>
<tr class="memdesc:a0e12b949ccc6beab5bad5c54848a06e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the spot in Fox units for a couple of currencies in a spot list.  <a href="#a0e12b949ccc6beab5bad5c54848a06e8"></a><br/></td></tr>
<tr class="separator:a0e12b949ccc6beab5bad5c54848a06e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7c2933ac6013e62100ff38bd5dd9055"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#ae7c2933ac6013e62100ff38bd5dd9055">gvSPOTget</a> (void *LdSpot, char *DevRef, char *DevCvt, double *Spot)</td></tr>
<tr class="memdesc:ae7c2933ac6013e62100ff38bd5dd9055"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the spot for a couple of currencies in a spot list.  <a href="#ae7c2933ac6013e62100ff38bd5dd9055"></a><br/></td></tr>
<tr class="separator:ae7c2933ac6013e62100ff38bd5dd9055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21a28e3fc012ff4a95ec2ba96c098746"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#a21a28e3fc012ff4a95ec2ba96c098746">gvSPOTgetUnitDB</a> (void *Ctx, char *Date, char *DevRef, char *DevCvt, double *Spot)</td></tr>
<tr class="memdesc:a21a28e3fc012ff4a95ec2ba96c098746"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the spot in Fox units for a couple of currencies in the DB.  <a href="#a21a28e3fc012ff4a95ec2ba96c098746"></a><br/></td></tr>
<tr class="separator:a21a28e3fc012ff4a95ec2ba96c098746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a119db92e838b27952942c7f268e3a901"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_gv_spots_8c.html#a119db92e838b27952942c7f268e3a901">gvSPOTgetDB</a> (void *Ctx, char *Date, char *DevRef, char *DevCvt, double *Spot)</td></tr>
<tr class="memdesc:a119db92e838b27952942c7f268e3a901"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the spot for a couple of currencies in the DB.  <a href="#a119db92e838b27952942c7f268e3a901"></a><br/></td></tr>
<tr class="separator:a119db92e838b27952942c7f268e3a901"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Global View spots. </p>
<p>Global View spots.</p>
<dl class="section user"><dt>Header file</dt><dd><a class="el" href="mkt__def_8h.html" title="Header file for all MKT functions and types.">mkt_def.h</a></dd></dl>
<dl class="section user"><dt>Acronyme</dt><dd>gvSPOTS</dd></dl>
<dl class="section user"><dt>Library</dt><dd>mkt</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 08/Feb/1998. </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ad50eca04a45ab7a038ca2e7382e60b6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MISSING_SPOT&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acb3f158b288ad6a5bd7b70d84961da5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SPOTS_TRT&#160;&#160;&#160;7000</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae7c2933ac6013e62100ff38bd5dd9055"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gvSPOTget </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DevRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DevCvt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Spot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the spot for a couple of currencies in a spot list. </p>
<p>Find the spot for a couple of currencies in a spot list. Details may be found in gvSPOTgetUnit.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdSpot</td><td>Spot list initialised with SPOTinit </td></tr>
    <tr><td class="paramname">DevRef</td><td>Reference currency </td></tr>
    <tr><td class="paramname">DevCvt</td><td>Currency to convert </td></tr>
    <tr><td class="paramname">Spot</td><td>(out) Spot value in market units</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 02/Nov/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd>Mikel ARETXAGA - 10/Jul/2000. Set Warning instead of Error </dd></dl>

</div>
</div>
<a class="anchor" id="a119db92e838b27952942c7f268e3a901"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gvSPOTgetDB </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DevRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DevCvt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Spot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the spot for a couple of currencies in the DB. </p>
<p>Find the spot for a couple of currencies in the DB. Details may be found in gvSPOTgetUnitDB.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Date</td><td>Reference date </td></tr>
    <tr><td class="paramname">DevRef</td><td>Reference currency </td></tr>
    <tr><td class="paramname">DevCvt</td><td>Currency to convert </td></tr>
    <tr><td class="paramname">Spot</td><td>(out) Spot value in market units</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 02/Nov/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd>Mikel ARETXAGA - 10/Jul/2000. Set Warning instead of Error<ul>
<li>Amparo CAMARERO - 05/Nov/2012: Modify function header to match new DOXYGEN format </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a0e12b949ccc6beab5bad5c54848a06e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gvSPOTgetUnit </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DevRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DevCvt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Spot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the spot in Fox units for a couple of currencies in a spot list. </p>
<p>Find the spot in Fox units for a couple of currencies in a spot list. This function is equivalent to SPOTgetUnit but it's intended to be used when spots may not be available. When a spot cannot be found it DOES NOT show any alert message and it returns 1 instead of 0 (to avoid potential divisions by zero). Under error circumstances it returns an error code different to zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>DB connection </td></tr>
    <tr><td class="paramname">LdSpot</td><td>Spot list initialised with SPOTinit </td></tr>
    <tr><td class="paramname">DevRef</td><td>Reference currency </td></tr>
    <tr><td class="paramname">DevCvt</td><td>Currency to convert </td></tr>
    <tr><td class="paramname">Spot</td><td>(out) Spot value in Fox units</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 02/Nov/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Lorea NAVARRO - 24/Nov/2006: Add AFUccyGetIntDta functioni and add Ctx parameter in this function. </li>
</ul>

</div>
</div>
<a class="anchor" id="a21a28e3fc012ff4a95ec2ba96c098746"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gvSPOTgetUnitDB </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DevRef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>DevCvt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>Spot</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the spot in Fox units for a couple of currencies in the DB. </p>
<p>Find the spot in Fox units for a couple of currencies in the DB This function is equivalent to SPOTconv but it's intended to be used when spots may not be available. When a spot cannot be found it DOES NOT show any alert message and it returns 1 instead of 0 (to avoid potential divisions by zero). Under error circumstances it returns an error code different to zero. This function is created to enable modifying the treatment associated to a report printing (037, rapResPap) that checks spots without impacts on the others that use the same treatment (e.g. 035) but don't check spots.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Date</td><td>Reference date </td></tr>
    <tr><td class="paramname">DevRef</td><td>Reference currency </td></tr>
    <tr><td class="paramname">DevCvt</td><td>Currency to convert </td></tr>
    <tr><td class="paramname">Spot</td><td>(out) Spot value in Fox units</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 02/Nov/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Lorea NAVARRO - 24/Nov/2006: Use AFUccyGetIntDta function instead of infEchQnt.</li>
<li>Amparo CAMARERO - 05/Nov/2012: Modify function header to match new DOXYGEN format </li>
</ul>

</div>
</div>
<a class="anchor" id="af35004c505672bb09b15834dd7990385"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gvSPOTScontrol </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdMisSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control missing spots. </p>
<p>Control missing spots. This function loads all the necessary spots (through the centralised function gvSPOTSgetList) and leaves all spots with at least one value at zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Date</td><td>Spot date </td></tr>
    <tr><td class="paramname">LdMisSpo</td><td>(out) Dynamic list to return values</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 11/Feb/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Jon BARRUTIA - 21/Nov/2008: Use &lt;&gt; instead of != </li>
</ul>

</div>
</div>
<a class="anchor" id="a450122996986a6ae4cbccb8c52dccd3a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gvSPOTSgetList </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdSpotOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get list of spots, deleting the devIn. </p>
<p>Get the list of all currencies (RefCurr, Curr) couples among the active currencies (RefCurr != Curr) with the existing values in the spot table. If no value is present a 0 will be obtained. Spots of the EUR zone are deleted</p>
<p>For each couple (dev1, dev2) two values are stored (val1, val2) for a date (dat).</p>
<dl class="section note"><dt>Note</dt><dd>The calling function must carry out the error handling</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Date</td><td>Spot date </td></tr>
    <tr><td class="paramname">LdSpotOut</td><td>(out) Spots list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 08/Feb/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Isma ETXEBERRIA &amp; Ramon MARTINEZ - 08/Feb/1998</li>
<li>Isma ETXEBERRIA &amp; Ramon MARTINEZ - 13/Jan/1999.Delete spot or DevIn</li>
<li>Ruben SIERRA - 22/May/2002. In function DYNgenSort add param order</li>
<li>Ismael SERRANO - 21/Aug/2006. Use CSTReadPas</li>
<li>Ruben GIL -09/Nov/2006: Add Dev variable in CSTreadPasDB function</li>
<li>Jon BARRUTIA - 21/Nov/2008: Use &lt;&gt; instead of !=</li>
<li>Jon BARRUTIA - 06/Nov/2017: Initialise RefDev with the configured currency in AO.RefDev </li>
</ul>

</div>
</div>
<a class="anchor" id="abb0feee306c8f5c57fccc76aac797eac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gvSPOTSsaveList </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpotToSave</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdAls</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save a list of spots. </p>
<p>Save a list of spots.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Date</td><td>Spot date </td></tr>
    <tr><td class="paramname">LdSpotToSave</td><td>List of spots to save </td></tr>
    <tr><td class="paramname">LdAls</td><td>List of books to diffuse</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 08/Feb/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Mikel ARETXAGA - 03/Sep/1998 : 'Alias' parameter added.</li>
<li>Isma ETXEBERRIA - 28/Jul/1999 : Double saving removed.</li>
<li>Basilio TAMAYO - 09/Jun/2000 : LdSpotToSave, use address.</li>
<li>Basilio TAMAYO - 26/Jun/2000 : Add LdAls instead of getting it in the function.</li>
<li>Alex RODRIGUEZ - 10/Jan/2002 : Add lock functions when modify mkt_dta_his table.</li>
<li>Basilio TAMAYO - 02/Sep/2005: Save spots with 8 decimals, like market data</li>
<li>Jose M.NUNEZ - 27/May/2008: Use gb_lck_exc instead of syb_lck_exclusive</li>
<li>Gotzon ETXEBERRIA - 22/Jun/2012: Use GBdmdLckTab with ERRchkGb instead of ERRchk</li>
<li>Jon BARRUTIA - 14/May/2018: Date calculation inside of lcgvSPOTScalculate. It returns a new list with full data to save. Call to lcgvSPOTSsavSpoAls</li>
</ul>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="_gv_spots_8c.html#aa0b9c52b8b584d46d680b1cff4a30a94" title="Calculate missing spots.">lcgvSPOTScalculate</a>, <a class="el" href="_gv_spots_8c.html#ab4670806f8562140376b2f3296458fc3" title="Save a list of fixing spots in current database.">lcgvSPOTSsavSpoAls</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aa0b9c52b8b584d46d680b1cff4a30a94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcgvSPOTScalculate </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpotsToCalc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdSpoSav</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate missing spots. </p>
<p>This function assumes the structure given by gvSPOTSgetList (a list with columns dev1, dev2, val1 and val2) with the values set. Starting from a list of (RefCurr, Curr-i) the list of all combinations (Curr-i, Curr-j). Only one value will be calculated for each couple, i.e. only (i, j) or (j, i). It also adds all currencies in EUR if any of them is in the original list</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Date</td><td>Date </td></tr>
    <tr><td class="paramname">LdSpotsToCalc</td><td>Spots list. Input data list used as source to calculate full spot list </td></tr>
    <tr><td class="paramname">LdSpoSav</td><td>(out) Spot list to save. Columns: "dev1", "dev2", "val1", "val2", "dat"</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 08/Feb/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 26/Jan/1999: When calculating the crossed currencies, if the spot is &lt; 0.1, increase the spot in multiples of 10 as well as the coefficient of the other currency. This gives more precision. 1 EUR are 0,00601 ESP &mdash;&gt; spot = 0,00601, coefficient = 1 100 EUR are 0,601012 ESP &mdash;&gt; spot = 0,601012, coefficient = 100</li>
<li>Josune BIKUNA - 27/Jan/1999: When calculating the crossed currencies, between EUR and an IN currency, get the spot directly from the list of spots of IN currencies.</li>
<li>Isma ETXEBERRIA &amp; Jon BARRUTIA. 21/Jan/2000. Avoid a infinite loop</li>
<li>Basilio TAMAYO &amp; Isma ETXEBERRIA - 06/Jun/2000. Rewrite it with different algorithm. Ctx parameter is not needed any longer</li>
<li>Basilio TAMAYO - 09/Jun/2000. Add DYNdistinctLines to avoid duplicated couples</li>
<li>Basilio TAMAYO - 14/Jun/2000. Change DYNdistinctLines with DYNelimineDoub</li>
<li>Basilio TAMAYO - 13/Mar/2003: Only add currencies in EUR if they are active</li>
<li>Josune BIKUNA - 02/Oct/2003. Avoid compilation warnings</li>
<li>Gotzon ETXEBERRIA - 27/May/2004: Use ERRchk instead of ERRass when calling to DYNcbn[Chk]</li>
<li>Ruben GIL -09/Nov/2006: Add DevRef variable in CSTreadPasDB function</li>
<li>Jon BARRUTIA - 14/May/2018: Returns resultant data into another list; to avoid memory problems </li>
</ul>

</div>
</div>
<a class="anchor" id="ab4670806f8562140376b2f3296458fc3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcgvSPOTSsavSpoAls </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdSpo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save a list of fixing spots in current database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context where fixing spots will be saved </td></tr>
    <tr><td class="paramname">Dat</td><td>Spot date. Used to delete possible previous existent spots </td></tr>
    <tr><td class="paramname">LdSpo</td><td>List of spots to save. Columns: dat, dev1, val1, dev2, val2</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jon BARRUTIA - 14/May/2018</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>

</div>
</div>
<a class="anchor" id="a0248ebb033e04842580f81ded2b25dc8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SPOTctrlErr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Date</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Control spots and assign errors to error list. </p>
<p>Control spots and assign errors to error list</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Date</td><td>Spot date</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 20/Nov/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd>Mikel ARETXAGA - 10/Jul/2000. Set Warning list instead of Error<ul>
<li>Ruben GIL -09/Nov/2006: Add DatMsg variable in rdbtouser function </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="_gv_spots_8c.html">GvSpots.c</a></li>
    <li class="footer">Copyright &#169 ALMIS Informatica Financiera S.L. Reserved all the rights. Generated on Wed Jul 4 2018 22:33:48 for AFU by 
    <a href="http://www.almis.com">
    <img class="footer" src="DxyAlm.png" alt="ALMIS"/></a> </li>
  </ul>
</div>
</body>
</html>
