<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ALU: src/bookAccess.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ALU
   &#160;<span id="projectnumber">5.1</span>
   </div>
   <div id="projectbrief">ALMIS_utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('book_access_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">bookAccess.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Access and book control.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="alu__types_8h_source.html">alu_types.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="alu_joi_def_8h_source.html">aluJoiDef.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="book_access_8h_source.html">bookAccess.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="chaine_8h_source.html">chaine.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="cst__def_8h_source.html">cst_def.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="dyn_def_8h_source.html">dynDef.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="err_def_8h_source.html">errDef.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="fsa__def_8h_source.html">fsa_def.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="gb_8h_source.html">gb.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="glb_def_8h_source.html">glbDef.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="itf__def_8h_source.html">itf_def.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="str__def_8h_source.html">str_def.h</a>&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2d4ecfc3ac84302d213732463e3230d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a2d4ecfc3ac84302d213732463e3230d5">ERR_COD_BOK</a>&#160;&#160;&#160;1011</td></tr>
<tr class="separator:a2d4ecfc3ac84302d213732463e3230d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70e9d5da96195477deb608c251b50dc3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a70e9d5da96195477deb608c251b50dc3">OPT_RES</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:a70e9d5da96195477deb608c251b50dc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0a0effb6ed040365fb2a7ed6b2af5159"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a0a0effb6ed040365fb2a7ed6b2af5159">ldACCgetLlTrtAls</a> (void *Ctx, void **LlTrtAls)</td></tr>
<tr class="memdesc:a0a0effb6ed040365fb2a7ed6b2af5159"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the list of books per treatment.  <a href="#a0a0effb6ed040365fb2a7ed6b2af5159"></a><br/></td></tr>
<tr class="separator:a0a0effb6ed040365fb2a7ed6b2af5159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d6837b7e8d98ae90795b4b27d45552b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a1d6837b7e8d98ae90795b4b27d45552b">lcACCgetMtr</a> (void *LlMtr, char *Trt)</td></tr>
<tr class="memdesc:a1d6837b7e8d98ae90795b4b27d45552b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Complete the metatreatments of one treatment.  <a href="#a1d6837b7e8d98ae90795b4b27d45552b"></a><br/></td></tr>
<tr class="separator:a1d6837b7e8d98ae90795b4b27d45552b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba397cc20feaaa34daa285f48c4bd2c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a8ba397cc20feaaa34daa285f48c4bd2c">ACCinitRestrictedTrts</a> (void *Ctx, char *Usr, char *Grp)</td></tr>
<tr class="memdesc:a8ba397cc20feaaa34daa285f48c4bd2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise access information.  <a href="#a8ba397cc20feaaa34daa285f48c4bd2c"></a><br/></td></tr>
<tr class="separator:a8ba397cc20feaaa34daa285f48c4bd2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae252d6f6b4121e584f1200138ef95a9a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#ae252d6f6b4121e584f1200138ef95a9a">ACCinitAndGetRestrictedTrts</a> (void *Ctx, char *Usr, char *Grp, void **Ld)</td></tr>
<tr class="memdesc:ae252d6f6b4121e584f1200138ef95a9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise and get access information.  <a href="#ae252d6f6b4121e584f1200138ef95a9a"></a><br/></td></tr>
<tr class="separator:ae252d6f6b4121e584f1200138ef95a9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f3eacf0a3296b417a8aaf330e7a5829"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a4f3eacf0a3296b417a8aaf330e7a5829">ACCisAccessTrtOk</a> (char *Trt)</td></tr>
<tr class="memdesc:a4f3eacf0a3296b417a8aaf330e7a5829"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a treatment is accessible by the current user.  <a href="#a4f3eacf0a3296b417a8aaf330e7a5829"></a><br/></td></tr>
<tr class="separator:a4f3eacf0a3296b417a8aaf330e7a5829"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bd09222919c3949db2294ea9b3f5a00"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a2bd09222919c3949db2294ea9b3f5a00">ACCgetLineTrt</a> (char *Trt)</td></tr>
<tr class="memdesc:a2bd09222919c3949db2294ea9b3f5a00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the number of the line where Trt is stored.  <a href="#a2bd09222919c3949db2294ea9b3f5a00"></a><br/></td></tr>
<tr class="separator:a2bd09222919c3949db2294ea9b3f5a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1a8216e1d562c2bf03ab827337dc301"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#ac1a8216e1d562c2bf03ab827337dc301">ACCgetBooksTrt</a> (char *Trt, void **LdAls)</td></tr>
<tr class="memdesc:ac1a8216e1d562c2bf03ab827337dc301"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get books accessible for a treatment and user/group.  <a href="#ac1a8216e1d562c2bf03ab827337dc301"></a><br/></td></tr>
<tr class="separator:ac1a8216e1d562c2bf03ab827337dc301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49f215d92860005dd4849ff30b341c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#ac49f215d92860005dd4849ff30b341c6">ACCdetruitTrtAcc</a> (void)</td></tr>
<tr class="memdesc:ac49f215d92860005dd4849ff30b341c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees all the structures reserved by ACCinitRestrictedTrts.  <a href="#ac49f215d92860005dd4849ff30b341c6"></a><br/></td></tr>
<tr class="separator:ac49f215d92860005dd4849ff30b341c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab584d6cb632442f942a2a3212d05d6c9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#ab584d6cb632442f942a2a3212d05d6c9">ACCduplicNonLeafItems</a> (void *Tree)</td></tr>
<tr class="memdesc:ab584d6cb632442f942a2a3212d05d6c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicate non leaf items from a menu ll list.  <a href="#ab584d6cb632442f942a2a3212d05d6c9"></a><br/></td></tr>
<tr class="separator:ab584d6cb632442f942a2a3212d05d6c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc1a2d55e1bd88983ac308151c85607"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a3bc1a2d55e1bd88983ac308151c85607">ACCisDupMnuItmCod</a> (void *Tree, void **LdOut)</td></tr>
<tr class="memdesc:a3bc1a2d55e1bd88983ac308151c85607"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if are duplicated menu item codes.  <a href="#a3bc1a2d55e1bd88983ac308151c85607"></a><br/></td></tr>
<tr class="separator:a3bc1a2d55e1bd88983ac308151c85607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d34d9eb7c132065b1c93d9f1e338785"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a9d34d9eb7c132065b1c93d9f1e338785">ACCmatchMenuCodeLabs</a> (void *Ctx, void *LdMenu, char *WhereClause, void **LdMatch)</td></tr>
<tr class="memdesc:a9d34d9eb7c132065b1c93d9f1e338785"><td class="mdescLeft">&#160;</td><td class="mdescRight">Match restricted treatments with related menu options.  <a href="#a9d34d9eb7c132065b1c93d9f1e338785"></a><br/></td></tr>
<tr class="separator:a9d34d9eb7c132065b1c93d9f1e338785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40d3222fa3314bc3e876e0dc7740fdd9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a40d3222fa3314bc3e876e0dc7740fdd9">ACCgetRestrictedOpts</a> (void *Ctx, char *MnuNam, char *MnuItm, void *LdGrp, void *LdUsr, void **LdAccRes)</td></tr>
<tr class="memdesc:a40d3222fa3314bc3e876e0dc7740fdd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the restricted menu option carring out selected criterias.  <a href="#a40d3222fa3314bc3e876e0dc7740fdd9"></a><br/></td></tr>
<tr class="separator:a40d3222fa3314bc3e876e0dc7740fdd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1faf2aae3d93c7543395e2cedc7118b0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a1faf2aae3d93c7543395e2cedc7118b0">ACCmakeWhereClause</a> (char *MnuItm, void *LdGrp, void *LdUsr, char **WheCla)</td></tr>
<tr class="memdesc:a1faf2aae3d93c7543395e2cedc7118b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make the where clause for treatment selection.  <a href="#a1faf2aae3d93c7543395e2cedc7118b0"></a><br/></td></tr>
<tr class="separator:a1faf2aae3d93c7543395e2cedc7118b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a749c920a6bcbf5a74deeb0c6dde66e7c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a749c920a6bcbf5a74deeb0c6dde66e7c">ACCregister</a> (void *Ctx, char *Trt)</td></tr>
<tr class="memdesc:a749c920a6bcbf5a74deeb0c6dde66e7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an user's action in database.  <a href="#a749c920a6bcbf5a74deeb0c6dde66e7c"></a><br/></td></tr>
<tr class="separator:a749c920a6bcbf5a74deeb0c6dde66e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae85c1983e93cc20c17d6c53505f98862"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#ae85c1983e93cc20c17d6c53505f98862">ACCtrtRegDat</a> (void *Ctx, char *Trt, char *Dat, char *Cmt)</td></tr>
<tr class="memdesc:ae85c1983e93cc20c17d6c53505f98862"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an user's action in database.  <a href="#ae85c1983e93cc20c17d6c53505f98862"></a><br/></td></tr>
<tr class="separator:ae85c1983e93cc20c17d6c53505f98862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0f409abe6e88e7452f80093b5ea9cb2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#ab0f409abe6e88e7452f80093b5ea9cb2">ACCtrtIsLch</a> (void *Ctx, char *Trt, char *Dat, int *IsLch)</td></tr>
<tr class="memdesc:ab0f409abe6e88e7452f80093b5ea9cb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify if a treatment has been launched for a date.  <a href="#ab0f409abe6e88e7452f80093b5ea9cb2"></a><br/></td></tr>
<tr class="separator:ab0f409abe6e88e7452f80093b5ea9cb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fb81e5ec5c65a5d9bc3fc6c8bf86592"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a5fb81e5ec5c65a5d9bc3fc6c8bf86592">ACCrfsBokTrt</a> (void *Ctx, void **LdRes, char *PtrTrt)</td></tr>
<tr class="memdesc:a5fb81e5ec5c65a5d9bc3fc6c8bf86592"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get configuration of books for treatments.  <a href="#a5fb81e5ec5c65a5d9bc3fc6c8bf86592"></a><br/></td></tr>
<tr class="separator:a5fb81e5ec5c65a5d9bc3fc6c8bf86592"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fc84953a794eb55f34f3e22244e9184"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a7fc84953a794eb55f34f3e22244e9184">ACCtrtDesGetCod</a> (void *Ctx, char *Nam, char *Trt)</td></tr>
<tr class="memdesc:a7fc84953a794eb55f34f3e22244e9184"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take the code of a treatment name.  <a href="#a7fc84953a794eb55f34f3e22244e9184"></a><br/></td></tr>
<tr class="separator:a7fc84953a794eb55f34f3e22244e9184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad2e29b55f9fc755a28669c0ae453970"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#aad2e29b55f9fc755a28669c0ae453970">ACCtrtGetTrtModViw</a> (void *Ctx, char *Nam, void **LdVal)</td></tr>
<tr class="memdesc:aad2e29b55f9fc755a28669c0ae453970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take treatments for modify and viw mode.  <a href="#aad2e29b55f9fc755a28669c0ae453970"></a><br/></td></tr>
<tr class="separator:aad2e29b55f9fc755a28669c0ae453970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5267809c5ab4a00c31b2438039bd015b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a5267809c5ab4a00c31b2438039bd015b">ACCtrtGetTrt</a> (void *Ctx, char *Nam, void **LdVal)</td></tr>
<tr class="memdesc:a5267809c5ab4a00c31b2438039bd015b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take all definition treatments.  <a href="#a5267809c5ab4a00c31b2438039bd015b"></a><br/></td></tr>
<tr class="separator:a5267809c5ab4a00c31b2438039bd015b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d3637c9ff26c15d2b6ceab13c21bcb3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a6d3637c9ff26c15d2b6ceab13c21bcb3">ACCmtrGetMtr</a> (void *Ctx, char *Nam, char *NamTrt, void **LdVal)</td></tr>
<tr class="memdesc:a6d3637c9ff26c15d2b6ceab13c21bcb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take all definition metatreatments.  <a href="#a6d3637c9ff26c15d2b6ceab13c21bcb3"></a><br/></td></tr>
<tr class="separator:a6d3637c9ff26c15d2b6ceab13c21bcb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29a356910079c98ee018c5597cde0676"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a29a356910079c98ee018c5597cde0676">ACCgetFsbModTyp</a> (void *Ctx, char *Ide, char *Usr, char *Grp, int *Fsb, int *Done)</td></tr>
<tr class="memdesc:a29a356910079c98ee018c5597cde0676"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a modes group.  <a href="#a29a356910079c98ee018c5597cde0676"></a><br/></td></tr>
<tr class="separator:a29a356910079c98ee018c5597cde0676"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac677ee2116eaadf60ed3f3cd7afdc5b1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#ac677ee2116eaadf60ed3f3cd7afdc5b1">ACCgetBokLd</a> (void *Ctx, char *BokNam, char *Sit, int OnlVsb, void **LdBok, int *NbBok)</td></tr>
<tr class="memdesc:ac677ee2116eaadf60ed3f3cd7afdc5b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the list of books sorted by als.  <a href="#ac677ee2116eaadf60ed3f3cd7afdc5b1"></a><br/></td></tr>
<tr class="separator:ac677ee2116eaadf60ed3f3cd7afdc5b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a185d91132d0037c172fbc98a901ac06e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a185d91132d0037c172fbc98a901ac06e">ACCgetAlsNam</a> (void *Ctx, char *Nam, char *Sit, char *Als)</td></tr>
<tr class="memdesc:a185d91132d0037c172fbc98a901ac06e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the alias from the book name and site.  <a href="#a185d91132d0037c172fbc98a901ac06e"></a><br/></td></tr>
<tr class="separator:a185d91132d0037c172fbc98a901ac06e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf07d7f1cfa526a53397b0d44f09c0cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#adf07d7f1cfa526a53397b0d44f09c0cc">ACCgetAlsSit</a> (void *Ctx, char *Als, char *Sit)</td></tr>
<tr class="memdesc:adf07d7f1cfa526a53397b0d44f09c0cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the site from the book alias.  <a href="#adf07d7f1cfa526a53397b0d44f09c0cc"></a><br/></td></tr>
<tr class="separator:adf07d7f1cfa526a53397b0d44f09c0cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab096232c178184dfae26ea91660150a1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#ab096232c178184dfae26ea91660150a1">ACCgetUsrGrp</a> (void *Ctx, char *Usr, char *Grp, short *Vld)</td></tr>
<tr class="memdesc:ab096232c178184dfae26ea91660150a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the group a user belongs to.  <a href="#ab096232c178184dfae26ea91660150a1"></a><br/></td></tr>
<tr class="separator:ab096232c178184dfae26ea91660150a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28c1a49905e883e39ba3e9a46af035af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a28c1a49905e883e39ba3e9a46af035af">ACCtrtDesGetNam</a> (void *Ctx, char *Trt, char *Nam)</td></tr>
<tr class="memdesc:a28c1a49905e883e39ba3e9a46af035af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take the name of a treatment code.  <a href="#a28c1a49905e883e39ba3e9a46af035af"></a><br/></td></tr>
<tr class="separator:a28c1a49905e883e39ba3e9a46af035af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad91eddf091238a43bc6c7ebb9d7d0f05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#ad91eddf091238a43bc6c7ebb9d7d0f05">ACCsavUsrAcc</a> (void *LdAcc, char *Usr)</td></tr>
<tr class="memdesc:ad91eddf091238a43bc6c7ebb9d7d0f05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the modifications made on the menu for the user.  <a href="#ad91eddf091238a43bc6c7ebb9d7d0f05"></a><br/></td></tr>
<tr class="separator:ad91eddf091238a43bc6c7ebb9d7d0f05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2400265bf8681cb57a83cac22fafa71"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#ad2400265bf8681cb57a83cac22fafa71">ACCsavGrpAcc</a> (void *LdAcc, char *Grp)</td></tr>
<tr class="memdesc:ad2400265bf8681cb57a83cac22fafa71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the modifications made on the menu for the group.  <a href="#ad2400265bf8681cb57a83cac22fafa71"></a><br/></td></tr>
<tr class="separator:ad2400265bf8681cb57a83cac22fafa71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeb7f23622d49d71e95bfe26a3bf045f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#aaeb7f23622d49d71e95bfe26a3bf045f">ACCtrtRegTrt</a> (void *Ctx, char *TrtCod, char *TrtNam, char *AppIde, int TrtOrd)</td></tr>
<tr class="memdesc:aaeb7f23622d49d71e95bfe26a3bf045f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a treatment in the database.  <a href="#aaeb7f23622d49d71e95bfe26a3bf045f"></a><br/></td></tr>
<tr class="separator:aaeb7f23622d49d71e95bfe26a3bf045f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af9dfeda0ce4bc75f698c77dd84adbbf6"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#af9dfeda0ce4bc75f698c77dd84adbbf6">lcLdRestrTrt</a> = <a class="el" href="memoire_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:af9dfeda0ce4bc75f698c77dd84adbbf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25e1effe6497ecf639efa1850f5d0cdb"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a25e1effe6497ecf639efa1850f5d0cdb">lcLdBookDes</a> = <a class="el" href="memoire_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a25e1effe6497ecf639efa1850f5d0cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f42663b057969e2f5d8d2664d944be7"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="book_access_8c.html#a4f42663b057969e2f5d8d2664d944be7">lcLlTrtBooks</a> = <a class="el" href="memoire_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:a4f42663b057969e2f5d8d2664d944be7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Access and book control. </p>
<dl class="section user"><dt>Header file</dt><dd><a class="el" href="book_access_8h.html" title="Access and book control.">bookAccess.h</a></dd></dl>
<dl class="section user"><dt>Acronyme</dt><dd>ACC</dd></dl>
<p>This module manages access from two different points of view, trying to give answer to the questions:</p>
<ul>
<li>- 1.- Is a treatment accessible for a user?</li>
<li>- 2.- Which books are accessible for a user for a treatment?</li>
<li>- In other words, (1) it determines whether or not a treatment is accessible</li>
<li>for a user, possibly configured after the user's group, while (2) also-</li>
<li>provides the list of books accessible for each treatment for a given user.</li>
<li>(2) implies a multi-book concept and its configuration may include the</li>
<li>access permissions to treatments/books.</li>
<li></li>
<li>A meta-treatment mechanism enables specifying the list of books accessible</li>
<li>by a treatment in the terms of another treatment.</li>
<li></li>
<li>- Philosophy and pragmatical considerations</li>
<li>- One important philosophical aspect for this module is that the DEFAULT CASE</li>
<li>must be clearly specified, so that new users fall directly into this default</li>
<li>mode with no action. While the comment seems evident, similar control</li>
<li>algorithms in Fox used in the past have systematically followed a model</li>
<li>where a new user meant adding access information to various tables.</li>
<li>- Consequently, it will be typical to configure access rights at the group</li>
<li>level. We only need to configure access rights at the user level when we're</li>
<li>making an exception, and this is how the module works.</li>
<li>- Accessibility is only treated so far (automatically) through the dynamic</li>
<li>menu engine. An interface is available for the user to carry out this</li>
<li>configuration.</li>
<li></li>
<li>- Specific access management for the engines</li>
<li>- The list of modes in which we can manipulate a window is defined in a general way</li>
<li>for each window in the general descriptor.</li>
<li>- Besides this method, the SDT and MIE engines have the possibility of configuring</li>
<li>these modes at level of window/treatment group for each group or user.</li>
<li></li>
<li>- For it, we have a file trtm_mod.dat where are defined the different window/treatment</li>
<li>groups and a database table (trtm_mod) where the available modes are configured by</li>
<li>each group or user for each window/treatment group.</li>
<li>- The engine will catch the defined modes list in the descriptor. Next, it will look</li>
<li>for in the trtm_mod.dat file a group of defined window/treatment for their identifier.</li>
<li>- With this group, you accede to the database and the possible specific modes list is</li>
<li>looked for that has been defined. If there is not nothing defined, it is used the</li>
<li>defined into the descriptor.</li>
<li></li>
<li>- Module implementation use</li>
<li>- To use this module there are certain aspects that must be taken into account</li>
<li>- 1: at the application level</li>
<li>- 2: at the treatment level</li>
<li></li>
<li>- At the application level there are certain functions that must be called</li>
<li>correctly at the beginning of each connection. The configuration will be</li>
<li>loaded once for the whole session and all controls and information</li>
<li>retrieving will after be carried out from memory. This means that when</li>
<li>we change a book the configuraton must be re-loaded.</li>
<li></li>
<li>- It must also been noted that batch programs requiring a list of books</li>
<li>or access control should initialise the module at the beginning, normally</li>
<li>in the main () function.</li>
<li></li>
<li>- The function to execute at the beginning of the application/batch is:</li>
<li>- ERRchk (ACCinitRestrictedTrts (Ctx, Usr, Grp));</li>
<li></li>
<li>- Similarly, at the end of the application/batch we must free the associated</li>
<li>memory:</li>
<li></li>
<li>- ACCdetruitTrtAcc ();</li>
<li></li>
<li>- To get the aliases associated to a treatment 'TrtCod' we do:</li>
<li></li>
<li>- ERRchk (ACCgetBooksTrt ("TrtCod", &amp;LdAls));</li>
<li></li>
<li>- The resulting list must be destroyed when the treatment has finished.</li>
<li>- To verify if a user has the access to a specific treatment we do:</li>
<li>- ERRchk (ACCisAccessTrtOk ("TrtCod"));</li>
<li></li>
<li>- This function and others are used automatically by the dynamic menu module.</li>
<li>- Due to this we do not normally hard-code treatments for access control, as</li>
<li>their codes and management is automatic: treatment codes are specified in</li>
<li>the menu configuration data files and its parametering is carried out</li>
<li>automatically by the interface developed for this task.</li>
<li></li>
<li>- For the Engines:</li>
<li>- At the application level the engines verify automatically if there is a</li>
<li>specific modes list defined and it get it if exists.</li>
<li>- Configuration: Adding a new treatment in the database.</li>
<li></li>
<li>- When adding a new treatment in the database we may/must:</li>
<li></li>
<li>- A. Insert the new treatment code and label into the treatments descriptor</li>
<li>- B. Parameter which users (groups) should have access forbidden</li>
<li>- C. Parameter the books that are accessible for a treatment (multi-book)</li>
<li>- D. Parameter which users (groups) should have access to which books</li>
<li></li>
<li>- In other words, we may/must:</li>
<li></li>
<li>- A. Describe the treatment</li>
<li>- B. Specify access restrictions</li>
<li>- C. Specify aliases in a multi-book context</li>
<li>- D. Specify access in a multi-book context</li>
<li></li>
<li>- These tasks are described in more detail in sub-sections below.</li>
<li></li>
<li>- A. Configuration. How to: (&ndash; trtm_des &ndash;)</li>
<li>- Insert the new treatment code and label into the treatments descriptor</li>
<li></li>
<li>INSERT INTO trtm_des (cod, nam, ord, app)</li>
<li>VALUES ('TrtCod', 'Verbous description of TrtCod', 100, 'fx')</li>
<li></li>
<li>- For more details verify the trtm_des table description below.</li>
<li></li>
<li>- B. Configuration. How to: (&ndash; trtm_acc &ndash;)</li>
<li>- Parameter which users (groups) should have access forbidden</li>
<li></li>
<li>- 1.- Forbid access to all groups (everybody)</li>
<li></li>
<li>- INSERT INTO trtm_acc (trt, grp)</li>
<li>- VALUES ('TrtCod', '*')</li>
<li></li>
<li>- 2.- Forbid access to a groups, e.g. FO</li>
<li></li>
<li>- INSERT INTO trtm_acc (trt, grp)</li>
<li>- VALUES ('TrtCod', 'FO')</li>
<li></li>
<li>- 3.- Forbid access to a user OR allow access to a user if the group has</li>
<li>access restricted. Note that the logic for the user always inverts the</li>
<li>situation of the group. A new user always receives by default the</li>
<li>privilegies of the group.</li>
<li></li>
<li>- INSERT INTO trtm_acc (trt, usr)</li>
<li>- VALUES ('TrtCod', 'mark')</li>
<li></li>
<li>- C. Configuration. How to: (&ndash; book_trt &ndash;)</li>
<li>- Parameter the books that are accessible for a treatment (multi-book)</li>
<li></li>
<li>- This may be done directly, by specifying for each book the treatment and</li>
<li>the alias of the book or through a metatreatment, that is, specifying all</li>
<li>aliases that are specified for another treatment, being this one a real</li>
<li>treatment or fictious.</li>
<li></li>
<li>- 1.- Specify the list of aliases for a treatment or meta-treatment</li>
<li></li>
<li>- INSERT INTO book_trt (trt, als)</li>
<li>- VALUES ('TrtCod', 'fxt_clp_01')</li>
<li>- INSERT INTO book_trt (trt, als)</li>
<li>- VALUES ('TrtCod', 'fxt_clp_02')</li>
<li></li>
<li>- 2.- Specify that the aliases for a treatment (TrtCod) are the same as</li>
<li>those for a meta-treatment (MtrCod)</li>
<li></li>
<li>- INSERT INTO book_trt (trt, als, mtr)</li>
<li>- VALUES ('TrtCod', '*', 'MtrCod')</li>
<li></li>
<li>- D. Configuration. How to: (&ndash; trtm_acc &ndash;)</li>
<li>- Parameter which users (groups) should have access to which books</li>
<li></li>
<li>- A '*' on the als column refers to those aliases in the book_trt for this</li>
<li>treatment.</li>
<li></li>
<li>- 1.- Restrict access to a treatment to all groups for all aliases</li>
<li></li>
<li>- INSERT INTO trtm_acc (trt, als, grp)</li>
<li>- VALUES ('TrtCod', '*', '*')</li>
<li></li>
<li>- This configuration may be interesting in a testing period or when it's</li>
<li>also carried out at the user level.</li>
<li></li>
<li>- 2.- Restrict access to a treatment to a group for all aliases</li>
<li></li>
<li>- INSERT INTO trtm_acc (trt, als, grp)</li>
<li>- VALUES ('TrtCod', '*', 'FO')</li>
<li></li>
<li>- This configuration has the same effect as B2 above.</li>
<li></li>
<li>- 3.- Restrict access to a treatment to all groups for an alias</li>
<li></li>
<li>- INSERT INTO trtm_acc (trt, als, grp)</li>
<li>- VALUES ('TrtCod', 'fxt_clp_01', '*')</li>
<li></li>
<li>- 4.- Restrict access to a treatment to a groups for an alias</li>
<li></li>
<li>- INSERT INTO trtm_acc (trt, als, grp)</li>
<li>- VALUES ('TrtCod', 'fxt_clp_01', 'FO')</li>
<li></li>
<li>- 5.- Invert the group restriction for a particular user. It is possible</li>
<li>to specify an alias or all ('*').</li>
<li></li>
<li>- INSERT INTO trtm_acc (trt, als, usr)</li>
<li>- VALUES ('TrtCod', '*', 'mark')</li>
<li></li>
<li>- For the engines:</li>
<li>- E. Configuration. How to: (&ndash; trtm_mod &ndash;)</li>
<li>- A NULL on the grp, usr columns refers to all the groups or users.</li>
<li>- 1.- Specific modes list</li>
<li></li>
<li>- INSERT INTO trtm_mod (grp, usr, wgr, fsb)</li>
<li>- VALUES ('MG', 'mgr', 'statics', 8)</li>
<li>- The 'statics' label refers to a window/treatment group defined into the</li>
<li>trtm_mod.dat file.</li>
<li>- The fsb column refers to a modes list group defined into the engines.</li>
<li></li>
<li>- DATABASE SCHEMA</li>
<li>- Table: book_des</li>
<li>- Synopsis: General description of books</li>
<li>- Description: Contains the description of the books name and some general</li>
<li>characteristics. It should only be used from programs to get the name of a</li>
<li>book. All additional information is only useful for maintenance purposes.</li>
<li></li>
<li>- book_des</li>
<li>- nam BOOK_TYPE NOT NULL -&gt; Name of the book</li>
<li>- als ALS_TYPE NOT NULL -&gt; Alias of the database, link with $GBPARAM</li>
<li>- app PAR_TYPE NOT NULL -&gt; Application. Values: fox, gv, fgv, gen</li>
<li>- sit char (40) NOT NULL -&gt; Site. Values: ntw, alm, clp, bdm, ...</li>
<li>- typ PAR_TYPE NOT NULL -&gt; Type of book. Values: dev, prd, int</li>
<li>- ord int NOT NULL -&gt; Ordering position</li>
<li>- Vsb int NOT NULL -&gt; Flag to see the book in connection or not.</li>
<li>- UNIQUE INDEX (ord, als)</li>
<li></li>
<li>- Table: trtm_des</li>
<li>- Synopsis: General description of treatments</li>
<li>- Description: General description of treatments</li>
<li>- trtm_des</li>
<li>- cod COD_TYPE NOT NULL -&gt; Treatment code</li>
<li>- nam LIB_TYPE NOT NULL -&gt; Treatment label</li>
<li>- ord ITR_TYPE NULL -&gt; Ordering position</li>
<li>- app PAR_TYPE NULL -&gt; Application type. Values: fox, gv, fgv, gen</li>
<li>- UNIQUE INDEX (cod)</li>
<li></li>
<li>- Table: user_des</li>
<li>- Synopsis: General description of users (operators)</li>
<li>- user_des</li>
<li>- cod USR_TYPE NOT NULL -&gt; Operator code</li>
<li>- pss PSS_TYPE NOT NULL -&gt; Password</li>
<li>- grp GRP_TYPE NOT NULL -&gt; Group</li>
<li>- nam USR_TYPE NULL -&gt; Operator full name</li>
<li>- ctd ITR_TYPE NOT NULL -&gt; Connected</li>
<li>- sta ITR_TYPE NOT NULL -&gt; Status</li>
<li>- UNIQUE INDEX (cod)</li>
<li></li>
<li>- Table: grps_des</li>
<li>- Synopsis: General description of groups</li>
<li>- grps_des</li>
<li>- cod GRP_TYPE NOT NULL -&gt; Group code</li>
<li>- nam LIB_TYPE NOT NULL -&gt; Group full name</li>
<li>- rsp USR_TYPE NULL -&gt; Responsible of the group</li>
<li>- UNIQUE INDEX (cod)</li>
<li></li>
<li>- Table: trtm_acc</li>
<li>- Synopsis: user and group access information for treatments and books</li>
<li>- trtm_acc</li>
<li>- trt COD_TYPE NOT NULL -&gt; Treatment code</li>
<li>- als ALS_TYPE NULL -&gt; Book alias</li>
<li>- usr USR_TYPE NULL -&gt; User code</li>
<li>- grp GRP_TYPE NULL -&gt; Group code</li>
<li>- UNIQUE INDEX (trt, als, usr, grp)</li>
<li></li>
<li>- Table: book_trt</li>
<li>- Synopsis: Configuration of which books are affected by a treatment</li>
<li>- Description: specifies which books are susceptible to be run by a treatment.</li>
<li>Generic treatments may be used to group treatments, and this generic</li>
<li>treatments will be used directly in the code.</li>
<li>- book_trt</li>
<li>- trt TRT_TYPE NOT NULL -&gt; Treatment code</li>
<li>- als ALS_TYPE NOT NULL -&gt; Alias</li>
<li>- mtr TRT_TYPE NOT NULL -&gt; Metatreatment</li>
<li>- UNIQUE INDEX (trt, als, mtr)</li>
<li></li>
<li>- Table: trtm_mod</li>
<li>- Synopsis: Configuration of which books are affected by a treatment</li>
<li>- Description: Contains the specific modes list for a window/treatment</li>
<li>group</li>
<li>- trtm_mod</li>
<li>- grp GRP_TYPE NULL -&gt; Group</li>
<li>- nam USR_TYPE NULL -&gt; Operator name</li>
<li>- wgr TRT_TYPE NOT NULL -&gt; Windows/treatments group</li>
<li>- fsb TRT_TYPE NOT NULL -&gt; Code of the modes list</li>
<li></li>
<li>- DATA FILES</li>
<li>- File: trtm_mod.dat</li>
<li>- Description: Definition of the Window/treatment group used for the specific</li>
<li>access modes.</li>
<li>- trtm_mod.dat</li>
<li>- wgr char [15]</li>
<li>- ide char [15]</li>
<li><dl class="section user"><dt>Library</dt><dd>alu</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 11/Nov/1997 </dd></dl>
</li>
</ul>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a2d4ecfc3ac84302d213732463e3230d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ERR_COD_BOK&#160;&#160;&#160;1011</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a70e9d5da96195477deb608c251b50dc3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OPT_RES&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac49f215d92860005dd4849ff30b341c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ACCdetruitTrtAcc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees all the structures reserved by ACCinitRestrictedTrts. </p>
<p>Frees all the structures reserved by ACCinitRestrictedTrts</p>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 11/Nov/1997 </dd></dl>

</div>
</div>
<a class="anchor" id="ab584d6cb632442f942a2a3212d05d6c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCduplicNonLeafItems </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Tree</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Duplicate non leaf items from a menu ll list. </p>
<p>Duplicate non leaf items from a menu ll list, this is used only for access rights option to set selected or not selected a non leaf item. These duplicated menu options are added at the end of the submenu. Them labels are modified inserting "&gt;&gt;" symbol at the left.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Tree</td><td>Menu options ll list.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Ismael ETXEBERRIA &amp; Mikel ARETXAGA - 12/Aug/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Alex RODRIGUEZ - 08/Mar/2007: Do not use Dynputlignes function, because is dangerous. Better, use DYNputData function.</li>
<li>Jesus Maria GARCIA - 01/Apr/2009: Set NULL in the column sub to avoid problem with 64 bits </li>
</ul>

</div>
</div>
<a class="anchor" id="a185d91132d0037c172fbc98a901ac06e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCgetAlsNam </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Nam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Sit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Als</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the alias from the book name and site. </p>
<p>Get the alias from the book name and site.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Nam</td><td>Book name </td></tr>
    <tr><td class="paramname">Sit</td><td>Site </td></tr>
    <tr><td class="paramname">Als</td><td>(out) Book alias. Reserve memory with type ALS_TYPE.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 30/Jan/2009 </dd></dl>

</div>
</div>
<a class="anchor" id="adf07d7f1cfa526a53397b0d44f09c0cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCgetAlsSit </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Als</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Sit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the site from the book alias. </p>
<p>Get the site from the book alias.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Als</td><td>Book alias. </td></tr>
    <tr><td class="paramname">Sit</td><td>(out) Site name. Reserve memory with BOOK_TYPE.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 23/Feb/2009 </dd></dl>

</div>
</div>
<a class="anchor" id="ac677ee2116eaadf60ed3f3cd7afdc5b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCgetBokLd </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>BokNam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Sit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>OnlVsb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdBok</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>NbBok</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the list of books sorted by als. </p>
<p>Get the list of books form "book_des" table sorted by als. It is possible to indicate the names of the books in the format ('A', 'B', ...). The resulting values list (LdBok) will contains the following columns:</p>
<ul>
<li>als : Alias of the book</li>
<li>bok : Name of the book</li>
<li>app : Name of the module</li>
<li>sit : Site of the book</li>
<li>typ : Type of the book: dev (development), int (integration), prd (production)</li>
<li>Vsb : visibility flag</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">BokNam</td><td>Names of the books for which the information is required in format ('A', 'B'). NULL for all books </td></tr>
    <tr><td class="paramname">Sit</td><td>Name of the site whose books want to recover. NULL or "" for all sites. </td></tr>
    <tr><td class="paramname">OnlVsb</td><td>Flag to get only visible books (1) or all (0) </td></tr>
    <tr><td class="paramname">LdBok</td><td>(out) Resulting value list </td></tr>
    <tr><td class="paramname">NbBok</td><td>(out) Number of lines of the returned list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Nerea RAMOS - 15/Jul/2003</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Jon BARRUTIA - 17/Oct/2008: Book name is returned in "bok" column instead of "als"</li>
<li>Basilio TAMAYO - 30/Jan/2009: Add parameter OnlVsb.</li>
<li>Basilio TAMAYO - 23/Feb/2009: Add parameter Sit </li>
</ul>

</div>
</div>
<a class="anchor" id="ac1a8216e1d562c2bf03ab827337dc301"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCgetBooksTrt </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdAls</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get books accessible for a treatment and user/group. </p>
<p>Get the list of books accessible for a treatment and user/group.</p>
<ul>
<li>Note: Access must be initialised through ACCinitRestrictedTrts ()</li>
<li>Details:<ul>
<li>The resulting list has two colums: "als" and "bok", for the alias and name</li>
<li>The returned list is a copy, so that it has to be destroyed.</li>
</ul>
</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Trt</td><td>Name of the treatment </td></tr>
    <tr><td class="paramname">LdAls</td><td>(out) List of Alias ("als") and Books ("bok") by treatment.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 11/Nov/1997</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Ramon MARTINEZ - 03/May/2006: improve header</li>
<li>Edurne GORDOA - 02/Oct/2008: Go to end of function if lcLlTrtBooks is null.</li>
<li>Jon BARRUTIA - 20/Oct/2008: Not go to end of function if lcLlTrtBooks is null. It wont be NULL never.</li>
<li>Aitziber BARRRERO - 03/Oct/2012: Correct the header </li>
</ul>

</div>
</div>
<a class="anchor" id="a29a356910079c98ee018c5597cde0676"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCgetFsbModTyp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Ide</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Usr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Grp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>Fsb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>Done</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a modes group. </p>
<p>Get a modes group for a group/user for a specific window/treatment group.</p>
<ul>
<li>It searchs for the identifier ("ide" column of LdGen) into trtm_mod.dat file to get the window/treatment group. With this group, it searchs into the DB the modes group for a group/user.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Context </td></tr>
    <tr><td class="paramname">Ide</td><td>Window/treatment identifier </td></tr>
    <tr><td class="paramname">Usr</td><td>User </td></tr>
    <tr><td class="paramname">Grp</td><td>Group </td></tr>
    <tr><td class="paramname">Fsb</td><td>(OUT). Index of the list of modes group (defined into engines). See <a class="el" href="fsa__def_8h.html" title="Finite State Automata.">fsa_def.h</a>, fsbModTyp enumerate </td></tr>
    <tr><td class="paramname">Done</td><td>(OUT). Treatment is done (1 to can take into account the 'Fsb' parameter)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Jon BARRUTIA - 16/Mar/2000</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Edurne GORDOA - 06/Sep/2000. Correction with Done treatment</li>
<li>Ruben SIERRA - 30/Jul/2002. If fsb is default of the window, do not change Done.</li>
<li>Nerea RAMOS - 09/Jun/2003: ERRass was used wrong</li>
</ul>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="eng__functions_8c.html#a3f8a72e6464d3a648377ad5847135aae" title="Get a modes group.">ENGgetModesGrp</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a2bd09222919c3949db2294ea9b3f5a00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCgetLineTrt </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the number of the line where Trt is stored. </p>
<p>Return the number of the line where Trt is stored.</p>
<ul>
<li>Note: Access must be initialised through ACCinitRestrictedTrts ()</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Trt</td><td>Name of the treatment</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>-1: If the Trt is not stored</li>
<li>Otherwise, the index in the list</li>
</ul>
</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 06/JUL/1998 </dd></dl>

</div>
</div>
<a class="anchor" id="a40d3222fa3314bc3e876e0dc7740fdd9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCgetRestrictedOpts </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>MnuNam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>MnuItm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdGrp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdUsr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdAccRes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the restricted menu option carring out selected criterias. </p>
<p>Return the restricted menu option carring out selected criterias. If the menu type is a trading book menu ('f'), then, the menu name's both last characters are not taken into account.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context. </td></tr>
    <tr><td class="paramname">MnuNam</td><td>Application Menu name (CST: <a class="el" href="class_dyn_menu_bar.html">DynMenuBar</a>'). It can't be NULL. </td></tr>
    <tr><td class="paramname">MnuItm</td><td>Application menu item code. (example: fox:'f'; gv: 'g'; rsk </td></tr>
    <tr><td class="paramname">LdGrp</td><td>List of user group. </td></tr>
    <tr><td class="paramname">LdUsr</td><td>List of users. </td></tr>
    <tr><td class="paramname">LdAccRes</td><td>(OUT) List of restricted menu options.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Mikel ARETXAGA - 27/Jan/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Nerea RAMOS - 07/Oct/2003: Added MnuNam as a parameter</li>
<li>David IGLESIAS - 01/Apr/2004: set LdMenu to NULL, and add FileName option s.</li>
<li>Alex RODRIGUEZ - 11/May/2004. Extract application code from this function. Reorganise all function.</li>
<li>Nerea RAMOS - 17/May/2004: Removed not used local variable 'Len' </li>
</ul>

</div>
</div>
<a class="anchor" id="ab096232c178184dfae26ea91660150a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCgetUsrGrp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Usr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Grp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short *&#160;</td>
          <td class="paramname"><em>Vld</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the group a user belongs to. </p>
<p>Gets the group a user belongs to</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Usr</td><td>Username code </td></tr>
    <tr><td class="paramname">Grp</td><td>(out) Group code. Memory must be reserved. It must be of GRP_TYPE type </td></tr>
    <tr><td class="paramname">Vld</td><td>(out) Validity flag</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Nerea RAMOS - 07/Oct/2003 </dd></dl>

</div>
</div>
<a class="anchor" id="ae252d6f6b4121e584f1200138ef95a9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCinitAndGetRestrictedTrts </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Usr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Grp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>Ld</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise and get access information. </p>
<p>Initialise the list of restricted treatments and the books accessible by each treatment. This function will load Ld list with list of restricted treatments.</p>
<ul>
<li>Details :</li>
<li>+ If usr and grp are null -&gt; trt restricted by default to everyone</li>
<li>+ We obtain the list of all books treatments/books couples, like</li>
<li>- [[trt1, als1], [trt1, als2], [trt1, als3], ..., [trt2, als1], ...]</li>
<li>and convert it to a list like</li>
<li>- [ [trt1, LdAls1], [trt2, LdAls2], ...]</li>
<li>+ We obtain the list of treatments/books restricted for this group</li>
<li><p class="startli">+ We obtain the list of treatments/books for this user that change the behaviour for the group</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>GB database connection </td></tr>
    <tr><td class="paramname">Usr</td><td>Username code </td></tr>
    <tr><td class="paramname">Grp</td><td>Group code </td></tr>
    <tr><td class="paramname">Ld</td><td>List which will contain the list of restricted treatments.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 30/Jun/1998 </dd></dl>
</li>
</ul>

</div>
</div>
<a class="anchor" id="a8ba397cc20feaaa34daa285f48c4bd2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCinitRestrictedTrts </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Usr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Grp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise access information. </p>
<p>Initialise the list of restricted treatments and the books accessible by each treatment.</p>
<ul>
<li>Details :<ul>
<li>+ If usr and grp are null -&gt; trt restricted by default to everyone</li>
<li>+ We obtain the list of all books treatments/books couples, like:</li>
<li>[[trt1, als1], [trt1, als2], [trt1, als3], ..., [trt2, als1], ...]</li>
<li>and converts it to a list like</li>
<li>[trt1, LdAls1], [trt2, LdAls2], ...]</li>
<li>+ We obtain the list of treatments/books restricted for this group</li>
<li>+ We obtain the list of treatments/books for this user that change the behaviour for the group</li>
</ul>
</li>
<li>Initialises the following internal lists:<ul>
<li>+ lcLdRestrTrt: trt</li>
<li>+ lcLdBookDes : als - bok</li>
<li>+ lcLlTrtBooks: trt - List [als (- bok column is added in ACCgetBooksTrt)]</li>
</ul>
</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>GB database connection </td></tr>
    <tr><td class="paramname">Usr</td><td>Username code </td></tr>
    <tr><td class="paramname">Grp</td><td>Group code</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 11/Nov/1997</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Nerea RAMOS - 31/Aug/2001 Initialized LineGrpAls and LineUsrAls and changed inGrp and inUsr variables type to int</li>
<li>Basilio TAMAYO - 27/Apr/2004: New function ldACCgetLlTrtAls to get the list of books per treatment.</li>
<li>Nerea RAMOS - 06/May/2004: Control if lcLlTrtBooks list exist</li>
<li>Jon BARRUTIA - 20/Oct/2008: lcLdBookDes has the book name in "bok" instead of "nam".</li>
<li>Aitziber BARRERO - 03/Oct/2012: Correct the header </li>
</ul>

</div>
</div>
<a class="anchor" id="a4f3eacf0a3296b417a8aaf330e7a5829"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCisAccessTrtOk </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if a treatment is accessible by the current user. </p>
<p>Checks if a treatment is accessible by the current user.</p>
<ul>
<li>Note: Access must be initialised through ACCinitRestrictedTrts ()</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Trt</td><td>Name of the treatment</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>-1: Error, access not initialised</li>
<li>0: Treatment is forbidden</li>
<li>1: Treatment is accessible</li>
</ul>
</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Isma ETXEBERRIA - 11/Nov/1997 </dd></dl>

</div>
</div>
<a class="anchor" id="a3bc1a2d55e1bd88983ac308151c85607"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCisDupMnuItmCod </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdOut</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test if are duplicated menu item codes. </p>
<p>Test if are duplicated menu item codes in the defined menu items. It is used for access rights only. It returns a dyn list of menu items with duplicated menu item codes. If there aren't duplicated menu items codes, it returns a NULL pointing dyn list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Tree</td><td>Menu options ll list. </td></tr>
    <tr><td class="paramname">LdOut</td><td>(out) List of duplicates menu item codes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok 1 -&gt; Duplicated menu item codes.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Mikel ARETXAGA - 13/Aug/1998 </dd></dl>

</div>
</div>
<a class="anchor" id="a1faf2aae3d93c7543395e2cedc7118b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCmakeWhereClause </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>MnuItm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdGrp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdUsr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>WheCla</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make the where clause for treatment selection. </p>
<p>Make the where clause for treatment selection following selected criteria.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">MnuItm</td><td>Menu item code (For example: FO menu 'f', MO menu 'g', BO menu 'a') </td></tr>
    <tr><td class="paramname">LdGrp</td><td>List of user group. </td></tr>
    <tr><td class="paramname">LdUsr</td><td>List of users. </td></tr>
    <tr><td class="paramname">WheCla</td><td>(OUT) Where clause.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Mikel ARETXAGA - 27/Jan/1999</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Alex RODRIGUEZ - 11/May/2004. Set correct comments into header of function.</li>
<li>Nerea RAMOS - 12/May/2004. Correct WheeCla &ndash;&gt; WheCla</li>
<li>Basilio TAMAYO - 27/Sep/2004: If not groups and users, avoid NULL strings</li>
<li>Ruben GIL - 06/Sep/2013: Correct size_t warning </li>
</ul>

</div>
</div>
<a class="anchor" id="a9d34d9eb7c132065b1c93d9f1e338785"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCmatchMenuCodeLabs </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdMenu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>WhereClause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdMatch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Match restricted treatments with related menu options. </p>
<p>Match restricted treatments codes with related restricted menu options.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context. </td></tr>
    <tr><td class="paramname">LdMenu</td><td>Menu option list. </td></tr>
    <tr><td class="paramname">WhereClause</td><td>Where clause of treatment selection. </td></tr>
    <tr><td class="paramname">LdMatch</td><td>(out) List of matched restricted menu options.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Mikel ARETXAGA - 27/Jan/1999 </dd></dl>

</div>
</div>
<a class="anchor" id="a6d3637c9ff26c15d2b6ceab13c21bcb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCmtrGetMtr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Nam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>NamTrt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take all definition metatreatments. </p>
<p>Take all definition metatreatments</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Nam</td><td>metatreatment name </td></tr>
    <tr><td class="paramname">NamTrt</td><td>Treatment name </td></tr>
    <tr><td class="paramname">LdVal</td><td>(out) Resulting value list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Aitziber BARRERO - 26/Dec/2002.</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Nerea RAMOS - 24/Mar/2003. Removed LdLab parameter</li>
<li>Basilio TAMAYO - 27/Apr/2004: get all metatreatments, even if they have another metatreatment </li>
</ul>

</div>
</div>
<a class="anchor" id="a749c920a6bcbf5a74deeb0c6dde66e7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCregister </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an user's action in database. </p>
<p>Register in the trtm_log table an action executed by the connected user</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Channel to database </td></tr>
    <tr><td class="paramname">Trt</td><td>Treatment to register</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Edurne GORDOA - 14/Jun/2000</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Nerea RAMOS - 02/Jun/2003. Correct function synopsis and description</li>
<li>Edurne GORDOA - 15/Apr/2004: Use a function to get the sql string depending on the database management system</li>
<li>Alex RODRIGUEZ - 27/Aug/2004. FoxUsr &ndash;&gt; AppUsr.</li>
<li>Josune BIKUNA - 16/May/2006: Use ACCtrtRegDat to register the launchment of the treatment</li>
<li>Edurne GORDOA - 07/Jul/2009: Take into account comment parameter in call to function to register treatment </li>
</ul>

</div>
</div>
<a class="anchor" id="a5fb81e5ec5c65a5d9bc3fc6c8bf86592"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCrfsBokTrt </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdRes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>PtrTrt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get configuration of books for treatments. </p>
<p>Get configuration of books for treatments</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LdRes</td><td>(out) Resultant list </td></tr>
    <tr><td class="paramname">PtrTrt</td><td>Treatment to register</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Aitziber BARRERO - 24/Dec/2002.</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Aitziber BARRERO - 11/Feb/2003: Increment the size of WheLikNam</li>
<li>Nerea RAMOS - 25/Mar/2003: Modified select statement. Use UNION for the general book '*', because '*' alias doesn't usually exist in fgtretp table.</li>
<li>Aitziber BARRERO - 07/Apr/2003: Don't use UNION because the size of select sentence is bigger than the size of buffer</li>
<li>Gema ACHA - 09/Apr/2008: Convert sentences with left/right joins to SQL-Ansi</li>
<li>Gema ACHA - 01/May/2008: Write join sentence, don't use sentences defined in <a class="el" href="alu_joi_8c.html" title="C file for specifics joins for ALU utility.">aluJoi.c</a></li>
<li>Gema ACHA - 05/May/2008: Modify where clause </li>
</ul>

</div>
</div>
<a class="anchor" id="ad2400265bf8681cb57a83cac22fafa71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCsavGrpAcc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdAcc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Grp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the modifications made on the menu for the group. </p>
<p>Save the modifications made on the menu for the group.</p>
<ul>
<li>Former lcSaveGrpAccRights function from <a class="el" href="class_my_menu_access.html">MyMenuAccess</a> class</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdAcc</td><td>Access rights list for the selected group </td></tr>
    <tr><td class="paramname">Grp</td><td>Selected group</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0, if OK</li>
<li>An error code != 0, if an error occurs</li>
</ul>
</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 29/JUN/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<p>&ndash; Nerea RAMOS - 25/Nov/2002 Remove all lines in trtm_acc if selected group is "*". Show warning if this code is already restricted for all groups &ndash; Alex RODRIGUEZ - 17/May/2004. Use function GBdmdSelCnt. &ndash; Alex RODRIGUEZ - 13/Jun/2006. Add calls to GBgetCtx function. &ndash; Ismael SERRANO - 14/Feb/2008. Remove ORACLE macrodefinitions &ndash; Aitziber BARRERO - 03/Oct/2012: Correct the header </p>

</div>
</div>
<a class="anchor" id="ad91eddf091238a43bc6c7ebb9d7d0f05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCsavUsrAcc </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LdAcc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Usr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the modifications made on the menu for the user. </p>
<p>Save the modifications made on the menu for the user.</p>
<ul>
<li>Former lcSaveUsrAccRights functions from mymenuaccess class.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LdAcc</td><td>Access rights list for the selected user </td></tr>
    <tr><td class="paramname">Usr</td><td>Selected user</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>0, if OK</li>
<li>An error code != 0, if an error occurs</li>
</ul>
</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 29/JUN/1998</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<p>&ndash; Nerea RAMOS - 25/Nov/2002 Set as the first instruction in for sentence OldStatus and NewStatus control. And control if this code is already restricted for all groups &ndash; Alex RODRIGUEZ - 17/May/2004. Use function GBdmdSelCnt. &ndash; Alex RODRIGUEZ - 04/Apr/2005. Use ACCgetUsrGrp function. &ndash; Alex RODRIGUEZ - 26/May/2005. remove use of macro SGBD_ORACLE, now it is not neccesary. &ndash; Alex RODRIGUEZ - 13/Jun/2006. Add calls to GBgetCtx function. </p>

</div>
</div>
<a class="anchor" id="a7fc84953a794eb55f34f3e22244e9184"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCtrtDesGetCod </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Nam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take the code of a treatment name. </p>
<p>Take the code of a treatment name</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Nam</td><td>treatment name to register </td></tr>
    <tr><td class="paramname">Trt</td><td>(out) Resultant value. Memory must be reserved</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Aitziber BARRERO - 24/Dec/2002.</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="book_access_8c.html#a28c1a49905e883e39ba3e9a46af035af" title="Take the name of a treatment code.">ACCtrtDesGetNam</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a28c1a49905e883e39ba3e9a46af035af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCtrtDesGetNam </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Nam</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take the name of a treatment code. </p>
<p>Take the name of a treatment code</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Trt</td><td>Treatment code </td></tr>
    <tr><td class="paramname">Nam</td><td>(out) Result value. Treatment name the Memory must be reserved.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Manuel SANMARTIN - 27/May/2005</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="book_access_8c.html#a7fc84953a794eb55f34f3e22244e9184" title="Take the code of a treatment name.">ACCtrtDesGetCod</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a5267809c5ab4a00c31b2438039bd015b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCtrtGetTrt </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Nam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take all definition treatments. </p>
<p>Take all definition treatments</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Nam</td><td>treatment name </td></tr>
    <tr><td class="paramname">LdVal</td><td>(out) Resulting value list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Aitziber BARRERO - 26/Dec/2002.</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Nerea RAMOS - 24/Mar/2003. Removed LdLab parameter</li>
<li>Basilio TAMAYO - 25/Feb/2004: Add column lab </li>
</ul>

</div>
</div>
<a class="anchor" id="aad2e29b55f9fc755a28669c0ae453970"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCtrtGetTrtModViw </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Nam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LdVal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take treatments for modify and viw mode. </p>
<p>Take treatments for modify and viw mode</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">Nam</td><td>treatment name </td></tr>
    <tr><td class="paramname">LdVal</td><td>(out) Resulting value list</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Aitziber BARRERO - 26/Dec/2002.</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Nerea RAMOS - 24/Mar/2003. Removed LdLab parameter</li>
<li>Basilio TAMAYO - 25/Feb/2004: Add column lab</li>
<li>Basilio TAMAYO - 27/Apr/2004: Get only distinct </li>
</ul>

</div>
</div>
<a class="anchor" id="ab0f409abe6e88e7452f80093b5ea9cb2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCtrtIsLch </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>IsLch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify if a treatment has been launched for a date. </p>
<p>Verify if a treatment has been launched for a date</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database conexion </td></tr>
    <tr><td class="paramname">Trt</td><td>Treatment to register </td></tr>
    <tr><td class="paramname">Dat</td><td>Date for verification </td></tr>
    <tr><td class="paramname">IsLch</td><td>(OUT) 0: The treatment has NOT been generated 1: The treatment has been generated</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Josune BIKUNA - 16/May/2006</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Josune BIKUNA - 23/Feb/2010: Use GBdmdSelCnt instead od 'SELECT COUNT (*)'</li>
<li>Aitziber BARRERO- 03/Oct/2012: Correct the header </li>
</ul>

</div>
</div>
<a class="anchor" id="ae85c1983e93cc20c17d6c53505f98862"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCtrtRegDat </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Cmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an user's action in database. </p>
<p>Register in the trtm_log table an action executed by the connected user. A comment can be insert when the treatment is audited.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Channel to database </td></tr>
    <tr><td class="paramname">Trt</td><td>Treatment to register </td></tr>
    <tr><td class="paramname">Dat</td><td>Treatment to register </td></tr>
    <tr><td class="paramname">Cmt</td><td>Comment. NULL or empty to do not insert nothing</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. 0: Ok</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Edurne GORDOA - 14/Jun/2000</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Nerea RAMOS - 02/Jun/2003. Correct function synopsis and description</li>
<li>Edurne GORDOA - 15/Apr/2004: Use a function to get the sql string depending on the database management system</li>
<li>Alex RODRIGUEZ - 27/Aug/2004. FoxUsr &ndash;&gt; AppUsr.</li>
<li>Edurne GORDOA - 08/May/2007: Copy connected user global variable to a local buffer.</li>
<li>Edurne GORDOA - 07/Jul/2009: Take into acccount comment parameter</li>
<li>Aitziber BARRERO - 03/Oct/2012: Correct the header </li>
</ul>

</div>
</div>
<a class="anchor" id="aaeb7f23622d49d71e95bfe26a3bf045f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ACCtrtRegTrt </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>TrtCod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>TrtNam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>AppIde</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>TrtOrd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a treatment in the database. </p>
<p>Register a treatment in the database</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">TrtCod</td><td>Treatment code </td></tr>
    <tr><td class="paramname">TrtNam</td><td>Treatment name </td></tr>
    <tr><td class="paramname">AppIde</td><td>Application identifier. If NULL or empty not taken into account </td></tr>
    <tr><td class="paramname">TrtOrd</td><td>Treatment position. If -1 not taken into account</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Amparo CAMARERO - 18/Sep/2009 </dd></dl>

</div>
</div>
<a class="anchor" id="a1d6837b7e8d98ae90795b4b27d45552b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcACCgetMtr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>LlMtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Trt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Complete the metatreatments of one treatment. </p>
<p>Complete the metatreatments of one treatment.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LlMtr</td><td>(in/out) List of metatreatments per treatment </td></tr>
    <tr><td class="paramname">Trt</td><td>Treatment code</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. (0: Ok)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 27/Apr/2004 </dd></dl>

</div>
</div>
<a class="anchor" id="a0a0effb6ed040365fb2a7ed6b2af5159"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ldACCgetLlTrtAls </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>LlTrtAls</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the list of books per treatment. </p>
<p>Get the list of books per treatment</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Ctx</td><td>Database context </td></tr>
    <tr><td class="paramname">LlTrtAls</td><td>(out) List of books per treatment ("trt", "List"). To free this list use DYNdetruitLL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code. (0: Ok)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Basilio TAMAYO - 27/Apr/2004</dd></dl>
<dl class="section user"><dt>Modified</dt><dd></dd></dl>
<ul>
<li>Jon BARRUTIA - 20/Oct/2008: Return the correct list also when no books are found </li>
</ul>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a25e1effe6497ecf639efa1850f5d0cdb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* lcLdBookDes = <a class="el" href="memoire_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af9dfeda0ce4bc75f698c77dd84adbbf6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* lcLdRestrTrt = <a class="el" href="memoire_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4f42663b057969e2f5d8d2664d944be7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* lcLlTrtBooks = <a class="el" href="memoire_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="book_access_8c.html">bookAccess.c</a></li>
    <li class="footer">Copyright &#169 ALMIS Informatica Financiera S.L. Reserved all the rights. Generated on Wed Jul 4 2018 22:30:31 for ALU by 
    <a href="http://www.almis.com">
    <img class="footer" src="DxyAlm.png" alt="ALMIS"/></a> </li>
  </ul>
</div>
</body>
</html>
