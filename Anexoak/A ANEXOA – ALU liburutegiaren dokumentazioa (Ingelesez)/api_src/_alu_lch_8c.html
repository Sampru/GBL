<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ALU: src/AluLch.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ALU
   &#160;<span id="projectnumber">5.1</span>
   </div>
   <div id="projectbrief">ALMIS_utilities</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_alu_lch_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">AluLch.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>ALU applications launcher.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;direct.h&gt;</code><br/>
<code>#include &lt;io.h&gt;</code><br/>
<code>#include &lt;process.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;windows.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="chaine_8h_source.html">chaine.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="fmt_num__def_8h_source.html">fmtNum_def.h</a>&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae12e89fd12ccca2a758e56496caf7bb5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_alu_lch_8c.html#ae12e89fd12ccca2a758e56496caf7bb5">ENV_LEN</a>&#160;&#160;&#160;4096  /* Maximum size for a environment variable definition */</td></tr>
<tr class="separator:ae12e89fd12ccca2a758e56496caf7bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1d8e31a452ff40db808a854defbaafc5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_alu_lch_8c.html#a1d8e31a452ff40db808a854defbaafc5">lcALUlchCrtPurDir</a> (char *Dir)</td></tr>
<tr class="memdesc:a1d8e31a452ff40db808a854defbaafc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a directory if not exists and purge it.  <a href="#a1d8e31a452ff40db808a854defbaafc5"></a><br/></td></tr>
<tr class="separator:a1d8e31a452ff40db808a854defbaafc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab958b1019f0165d3858f1348e8a66381"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_alu_lch_8c.html#ab958b1019f0165d3858f1348e8a66381">lcALUlchPurDir</a> (char *Pth)</td></tr>
<tr class="memdesc:ab958b1019f0165d3858f1348e8a66381"><td class="mdescLeft">&#160;</td><td class="mdescRight">Purges the directory passed as parameter.  <a href="#ab958b1019f0165d3858f1348e8a66381"></a><br/></td></tr>
<tr class="separator:ab958b1019f0165d3858f1348e8a66381"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86edd1f39b39aac838249cf3d99a87d3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_alu_lch_8c.html#a86edd1f39b39aac838249cf3d99a87d3">lcALUlchReaIniFil</a> (char *IniFil)</td></tr>
<tr class="memdesc:a86edd1f39b39aac838249cf3d99a87d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a INI file and treat its entries.  <a href="#a86edd1f39b39aac838249cf3d99a87d3"></a><br/></td></tr>
<tr class="separator:a86edd1f39b39aac838249cf3d99a87d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f32808498dbad5b4b48383c5e146ac4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_alu_lch_8c.html#a6f32808498dbad5b4b48383c5e146ac4">main</a> (int Argc, char *Argv[])</td></tr>
<tr class="memdesc:a6f32808498dbad5b4b48383c5e146ac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Launcher for ALU applications.  <a href="#a6f32808498dbad5b4b48383c5e146ac4"></a><br/></td></tr>
<tr class="separator:a6f32808498dbad5b4b48383c5e146ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ALU applications launcher. </p>
<p>Launcher of the applications for ALU. It allows launching the following executable:</p>
<ul>
<li>AluWbs</li>
</ul>
<dl class="section user"><dt>Acronyme</dt><dd>ALUlch</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Andoni ALCELAY - 17/Jul/2017 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ae12e89fd12ccca2a758e56496caf7bb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENV_LEN&#160;&#160;&#160;4096  /* Maximum size for a environment variable definition */</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a1d8e31a452ff40db808a854defbaafc5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcALUlchCrtPurDir </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a directory if not exists and purge it. </p>
<p>Create a directory if not exists and purge it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Dir</td><td>Directory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0 if OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Andoni ALCELAY - 20/Jul/2017 </dd></dl>

</div>
</div>
<a class="anchor" id="ab958b1019f0165d3858f1348e8a66381"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcALUlchPurDir </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Pth</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Purges the directory passed as parameter. </p>
<p>Purges the directory passed as parameter. It removes all files older than a number of days that can be configured by the user into the FIL_PUR environment variable. Otherwise, the default number of days is 5. This variable should be into the &lt;AppAcr&gt;Cfg.ini file, to be configurable by the final user and configured before defining the purged directories (&lt;USR_REL_DIR&gt;) It uses the last modification date to know if it should be removed or not.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Pth</td><td>Complete directory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Andoni ALCELAY - 20/Jul/2017 </dd></dl>

</div>
</div>
<a class="anchor" id="a86edd1f39b39aac838249cf3d99a87d3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int lcALUlchReaIniFil </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>IniFil</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read a INI file and treat its entries. </p>
<p>Read a INI file and treat its entries. There are different behaviours depending on the sector. Some specific sectors are:</p>
<ul>
<li>"FRSCNX". Takes only one entry: the one with the same name as the launched application It defines the first connection for the application</li>
<li>"TRC_DIR". Takes only one entry: the one with the same name as the launched application It defines the directory of the trace file of the application</li>
<li>"MSG_DIR". Takes only one entry: the one with the same name as the launched application. It defines the directory of the specific messages file of the application. For instance, the specific messages generated by wmsEvm, wmsSeq,...</li>
<li>"APP_DIR". Concats the "AppHom", "AppTyp" (and "AppAcr" if the application is not "Wms") to each value. Assigns the value to the label.</li>
<li>"FEA_FIL". Concats the "AppHom", "AppTyp" and "AppAcr" to each value. Assigns the value to the label. These directories are created dinamically if not exist.</li>
<li>"USR_REL_DIR". Concats the "UsrDir", "USERNAME" and "AppTyp" to each value. Assigns the value to the label. These directories are created dinamically if not exist.</li>
<li>"PATH". Concats the "AppHom", "AppTyp" to each value and assigns it to the existent environment variable defined by the label. Assigns the resultant environment variable to the label.</li>
<li>"HOME_PATH". Concats the "AppHom" to each value and assigns it to the existent environment variable defined by the label. Assigns the resultant environment variable to the label. Similar to "PATH" but without the "AppTyp".</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">IniFil</td><td>INI file to be treated. Full name.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Andoni ALCELAY - 20/Jul/2017 </dd></dl>

</div>
</div>
<a class="anchor" id="a6f32808498dbad5b4b48383c5e146ac4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>Argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Launcher for ALU applications. </p>
<p>Executable that launches ALU applications reading before the configuration files and setting the correspondent environment variables. It reads the following configuration files that are placed in:</p>
<ul>
<li>&lt;AppHom&gt;&amp;lt;AppTyp&gt;<ul>
<li>&lt;AppAcr&gt;Cfg.ini: general configuration file for the application. This file can be at release-environment level</li>
<li>&lt;AppAcr&gt;Env.ini: configuration file at release-environment level (integration/production) +&lt;AppHom&gt;&amp;lt;AppTyp&gt;&amp;lt;AppAcr&gt;&amp;lt;AppVer&gt;\ini</li>
<li>&lt;AppAcr&gt;.ini : configuration file at executable level It reads the &lt;App&gt;.ini file only if the release is not passed as an argument. There are some environment variables set by code:</li>
</ul>
</li>
<li>AppAcr = Acronym of the application</li>
<li>AppNam = Name of the application</li>
<li>AppTyp = Environment launched</li>
<li>DISPLAY = Computer name taken from the COMPUTERNAME environment variable</li>
<li>EXEC_FILE = Executable's file name</li>
<li>LOG_FIL = Log file's name</li>
<li>NAMAPP = Name of the application</li>
<li>nomUser = User name taken from the USERNAME environment variable The directories defined into the USR_REL_DIR sector are created dinamically if they do not exist. Also they are purged taking into account a number of days. This number can be defined into a environment variable called "FIL_PUR". Otherwise, the default value to do it is 5.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Argc</td><td>Number of arguments </td></tr>
    <tr><td class="paramname">Argv</td><td>Array with the arguments<ul>
<li>The arguments are:<ul>
<li>AppNam Application name: afuWbs</li>
<li>Opt Optional parameters<ul>
<li>Rel: Release of the application</li>
<li>Ftc: First connection of the application</li>
<li>Cfg: Name of the &lt;App&gt;Cfg.ini file to read</li>
<li>Prt: Number of the port where the web service is listening</li>
<li>Pth: Path of configuration specific files</li>
<li>Bat: Name of batch to launch</li>
<li>Tsk: Tasks of the batch to launch. Separed by a "-". Example: "Nxd-PurMo"</li>
<li>Env: Application environment. It will be one of: "int", "prd"</li>
</ul>
</li>
</ul>
</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code (0: OK)</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Andoni ALCELAY - 20/Jul/2017 </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="_alu_lch_8c.html">AluLch.c</a></li>
    <li class="footer">Copyright &#169 ALMIS Informatica Financiera S.L. Reserved all the rights. Generated on Wed Jul 4 2018 22:30:30 for ALU by 
    <a href="http://www.almis.com">
    <img class="footer" src="DxyAlm.png" alt="ALMIS"/></a> </li>
  </ul>
</div>
</body>
</html>
